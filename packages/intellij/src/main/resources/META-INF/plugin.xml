<idea-plugin>
    <id>com.holoscript.intellij</id>
    <name>HoloScript</name>
    <vendor email="support@holoscript.dev" url="https://holoscript.dev">HoloScript</vendor>

    <description><![CDATA[
        <h2>HoloScript Language Support</h2>
        <p>Full IDE support for HoloScript - the language for building VR/XR experiences.</p>
        
        <h3>Features</h3>
        <ul>
            <li><b>Syntax Highlighting</b> - Beautiful highlighting for .hs, .hsplus, and .holo files</li>
            <li><b>Code Completion</b> - Smart completions for traits, properties, and events</li>
            <li><b>Error Checking</b> - Real-time error detection and diagnostics</li>
            <li><b>Go to Definition</b> - Navigate to object and function definitions</li>
            <li><b>Find References</b> - Find all usages of symbols</li>
            <li><b>Hover Information</b> - Documentation on hover</li>
            <li><b>Code Formatting</b> - Format your HoloScript code</li>
        </ul>
        
        <h3>Supported File Types</h3>
        <ul>
            <li><code>.hs</code> - Classic HoloScript</li>
            <li><code>.hsplus</code> - HoloScript Plus (with VR traits)</li>
            <li><code>.holo</code> - Declarative Composition</li>
        </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File Type -->
        <fileType
            name="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptFileType"
            fieldName="INSTANCE"
            language="HoloScript"
            extensions="hs;hsplus;holo"/>

        <!-- Language -->
        <lang.parserDefinition
            language="HoloScript"
            implementationClass="com.holoscript.intellij.parser.HoloScriptParserDefinition"/>

        <!-- Syntax Highlighter -->
        <lang.syntaxHighlighterFactory
            language="HoloScript"
            implementationClass="com.holoscript.intellij.highlighting.HoloScriptSyntaxHighlighterFactory"/>

        <!-- Color Settings Page -->
        <colorSettingsPage
            implementation="com.holoscript.intellij.highlighting.HoloScriptColorSettingsPage"/>

        <!-- Commenter -->
        <lang.commenter
            language="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptCommenter"/>

        <!-- Brace Matcher -->
        <lang.braceMatcher
            language="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptBraceMatcher"/>

        <!-- Quote Handler -->
        <lang.quoteHandler
            language="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptQuoteHandler"/>

        <!-- Folding -->
        <lang.foldingBuilder
            language="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptFoldingBuilder"/>

        <!-- Structure View -->
        <lang.psiStructureViewFactory
            language="HoloScript"
            implementationClass="com.holoscript.intellij.structure.HoloScriptStructureViewFactory"/>

        <!-- Find Usages -->
        <lang.findUsagesProvider
            language="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptFindUsagesProvider"/>

        <!-- Formatter -->
        <lang.formatter
            language="HoloScript"
            implementationClass="com.holoscript.intellij.formatting.HoloScriptFormattingModelBuilder"/>

        <!-- Code Style Settings -->
        <codeStyleSettingsProvider
            implementation="com.holoscript.intellij.formatting.HoloScriptCodeStyleSettingsProvider"/>

        <langCodeStyleSettingsProvider
            implementation="com.holoscript.intellij.formatting.HoloScriptLanguageCodeStyleSettingsProvider"/>

        <!-- Live Templates -->
        <liveTemplateContext
            contextId="HOLOSCRIPT"
            implementation="com.holoscript.intellij.templates.HoloScriptTemplateContext"/>

        <defaultLiveTemplates file="/liveTemplates/HoloScript.xml"/>

        <!-- Completion Contributor -->
        <completion.contributor
            language="HoloScript"
            implementationClass="com.holoscript.intellij.completion.HoloScriptCompletionContributor"/>

        <!-- Annotator -->
        <annotator
            language="HoloScript"
            implementationClass="com.holoscript.intellij.annotators.HoloScriptAnnotator"/>

        <!-- Line Marker Provider (for gutter icons) -->
        <codeInsight.lineMarkerProvider
            language="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptLineMarkerProvider"/>

        <!-- Documentation Provider -->
        <lang.documentationProvider
            language="HoloScript"
            implementationClass="com.holoscript.intellij.HoloScriptDocumentationProvider"/>

        <!-- Inlay Hints -->
        <codeInsight.inlayProvider
            language="HoloScript"
            implementationClass="com.holoscript.intellij.hints.HoloScriptInlayHintsProvider"/>
    </extensions>

    <actions>
        <action
            id="HoloScript.NewFile"
            class="com.holoscript.intellij.actions.NewHoloScriptFileAction"
            text="HoloScript File"
            description="Create a new HoloScript file">
            <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewFile"/>
        </action>
        
        <action
            id="HoloScript.Format"
            class="com.holoscript.intellij.actions.FormatHoloScriptAction"
            text="Format HoloScript"
            description="Format the current HoloScript file">
            <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt shift H"/>
        </action>
    </actions>
</idea-plugin>
