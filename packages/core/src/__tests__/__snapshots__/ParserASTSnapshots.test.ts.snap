// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Parser AST Visual Regression > AST Consistency Across Parsing > parsing same source twice produces identical AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "position": {
                  "x": 0,
                  "y": 1,
                  "z": -2,
                },
              },
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "position": {
                "x": 0,
                "y": 1,
                "z": -2,
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "Consistency",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Consistency",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "position": {
                  "x": 0,
                  "y": 1,
                  "z": -2,
                },
              },
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "position": {
                "x": 0,
                "y": 1,
                "z": -2,
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "Consistency",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Consistency",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "position": {
                "x": 0,
                "y": 1,
                "z": -2,
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "position": {
              "x": 0,
              "y": 1,
              "z": -2,
            },
          },
          "traits": Map {},
          "type": "color",
        },
      ],
      "directives": [],
      "id": "Consistency",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Consistency",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 10,
      "context": "  1 | composition Consistency {
> 2 |   color: "red"
              ^
  3 |   position: { x: 0, y: 1, z: -2 }
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   color: "red"
  3 |   position: { x: 0, y: 1, z: -2 }
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   color: "red"
  3 |   position: { x: 0, y: 1, z: -2 }
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > AST Node Properties > AST nodes should have line numbers 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "prop2": "value2",
              },
              "traits": Map {},
              "type": "prop1",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "prop2": "value2",
            },
            "traits": Map {},
            "type": "prop1",
          },
        ],
        "directives": [],
        "id": "Test",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Test",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "prop2": "value2",
              },
              "traits": Map {},
              "type": "prop1",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "prop2": "value2",
            },
            "traits": Map {},
            "type": "prop1",
          },
        ],
        "directives": [],
        "id": "Test",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Test",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "prop2": "value2",
            },
            "traits": Map {},
            "type": "prop1",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "prop2": "value2",
          },
          "traits": Map {},
          "type": "prop1",
        },
      ],
      "directives": [],
      "id": "Test",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Test",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 10,
      "context": "  1 | composition Test {
> 2 |   prop1: "value1"
              ^
  3 |   prop2: "value2"
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   prop1: "value1"
  3 |   prop2: "value2"
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   prop1: "value1"
  3 |   prop2: "value2"
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > AST Node Properties > AST should preserve source positions 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "cyan",
              },
              "traits": Map {},
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "cyan",
            },
            "traits": Map {},
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "PositionTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "PositionTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "cyan",
              },
              "traits": Map {},
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "cyan",
            },
            "traits": Map {},
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "PositionTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "PositionTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "cyan",
            },
            "traits": Map {},
            "type": "geometry",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "color": "cyan",
          },
          "traits": Map {},
          "type": "geometry",
        },
      ],
      "directives": [],
      "id": "PositionTest",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "PositionTest",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 13,
      "context": "  1 | composition PositionTest {
> 2 |   geometry: "sphere"
                 ^
  3 |   color: "cyan"
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   geometry: "sphere"
  3 |   color: "cyan"
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   geometry: "sphere"
  3 |   color: "cyan"
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > array literal AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "numbers": [
                  1,
                  2,
                  3,
                  4,
                  5,
                ],
              },
              "traits": Map {},
              "type": "colors",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "numbers": [
                1,
                2,
                3,
                4,
                5,
              ],
            },
            "traits": Map {},
            "type": "colors",
          },
        ],
        "directives": [],
        "id": "ArrayTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArrayTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "numbers": [
                  1,
                  2,
                  3,
                  4,
                  5,
                ],
              },
              "traits": Map {},
              "type": "colors",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "numbers": [
                1,
                2,
                3,
                4,
                5,
              ],
            },
            "traits": Map {},
            "type": "colors",
          },
        ],
        "directives": [],
        "id": "ArrayTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArrayTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "numbers": [
                1,
                2,
                3,
                4,
                5,
              ],
            },
            "traits": Map {},
            "type": "colors",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "numbers": [
              1,
              2,
              3,
              4,
              5,
            ],
          },
          "traits": Map {},
          "type": "colors",
        },
      ],
      "directives": [],
      "id": "ArrayTest",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ArrayTest",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 12,
      "context": "  1 | composition ArrayTest {
> 2 |   colors: ["red", "green", "blue"]
                ^
  3 |   numbers: [1, 2, 3, 4, 5]
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 19,
      "context": "  1 | composition ArrayTest {
> 2 |   colors: ["red", "green", "blue"]
                       ^
  3 |   numbers: [1, 2, 3, 4, 5]
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 28,
      "context": "  1 | composition ArrayTest {
> 2 |   colors: ["red", "green", "blue"]
                                ^
  3 |   numbers: [1, 2, 3, 4, 5]
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   colors: ["red", "green", "blue"]
  3 |   numbers: [1, 2, 3, 4, 5]
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   colors: ["red", "green", "blue"]
  3 |   numbers: [1, 2, 3, 4, 5]
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > nested object AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "position": {
                  "x": 0,
                  "y": 0,
                  "z": 0,
                },
                "rotation": {
                  "x": 0,
                  "y": 0,
                  "z": 0,
                },
              },
              "traits": Map {},
              "type": "transform",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "position": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
              "rotation": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
            },
            "traits": Map {},
            "type": "transform",
          },
        ],
        "directives": [],
        "id": "NestedTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NestedTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "position": {
                  "x": 0,
                  "y": 0,
                  "z": 0,
                },
                "rotation": {
                  "x": 0,
                  "y": 0,
                  "z": 0,
                },
              },
              "traits": Map {},
              "type": "transform",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "position": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
              "rotation": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
            },
            "traits": Map {},
            "type": "transform",
          },
        ],
        "directives": [],
        "id": "NestedTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NestedTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "position": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
              "rotation": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
            },
            "traits": Map {},
            "type": "transform",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 4,
              "line": 5,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "position": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "rotation": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
          },
          "traits": Map {},
          "type": "transform",
        },
      ],
      "directives": [],
      "id": "NestedTest",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "NestedTest",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > object literal AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "BasicCube",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BasicCube",
        "properties": {
          "color": "red",
          "geometry": "cube",
          "scale": {
            "x": 1,
            "y": 1,
            "z": 1,
          },
        },
        "traits": Map {},
        "type": "object",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "BasicCube",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BasicCube",
        "properties": {
          "color": "red",
          "geometry": "cube",
          "scale": {
            "x": 1,
            "y": 1,
            "z": 1,
          },
        },
        "traits": Map {},
        "type": "object",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "BasicCube",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "BasicCube",
      "properties": {
        "color": "red",
        "geometry": "cube",
        "scale": {
          "x": 1,
          "y": 1,
          "z": 1,
        },
      },
      "traits": Map {},
      "type": "object",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > simple composition AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "cyan",
                "position": {
                  "x": 0,
                  "y": 1.5,
                  "z": -2,
                },
              },
              "traits": Map {},
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "cyan",
              "position": {
                "x": 0,
                "y": 1.5,
                "z": -2,
              },
            },
            "traits": Map {},
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "SimpleOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SimpleOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "cyan",
                "position": {
                  "x": 0,
                  "y": 1.5,
                  "z": -2,
                },
              },
              "traits": Map {},
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "cyan",
              "position": {
                "x": 0,
                "y": 1.5,
                "z": -2,
              },
            },
            "traits": Map {},
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "SimpleOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SimpleOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "cyan",
              "position": {
                "x": 0,
                "y": 1.5,
                "z": -2,
              },
            },
            "traits": Map {},
            "type": "geometry",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "color": "cyan",
            "position": {
              "x": 0,
              "y": 1.5,
              "z": -2,
            },
          },
          "traits": Map {},
          "type": "geometry",
        },
      ],
      "directives": [],
      "id": "SimpleOrb",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "SimpleOrb",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 13,
      "context": "  1 | composition SimpleOrb {
> 2 |   geometry: "sphere"
                 ^
  3 |   color: "cyan"
  4 |   position: { x: 0, y: 1.5, z: -2 }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  3 |   color: "cyan"
  4 |   position: { x: 0, y: 1.5, z: -2 }
> 5 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  3 |   color: "cyan"
  4 |   position: { x: 0, y: 1.5, z: -2 }
> 5 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Complex Real-World AST Examples > dashboard with all features AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 18,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Chart": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [
          {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
        ],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Main dashboard view",
            },
            "name": "alt_text",
            "type": "trait",
          },
        ],
        "id": "./ui/Chart.holo",
        "loc": {
          "end": {
            "column": 2,
            "line": 21,
          },
          "start": {
            "column": 18,
            "line": 1,
          },
        },
        "name": "./ui/Chart.holo",
        "properties": {
          "Dashboard": true,
          "__spread_BaseLayout": {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
          "composition": true,
          "panels": [
            {
              "__ref": "ui_panel",
            },
            {
              "content": {
                "target": {
                  "__ref": "statusText",
                },
                "type": "nullCoalescingAssignment",
                "value": "Ready",
              },
              "title": "Status",
            },
            {
              "__ref": "ui_panel",
            },
            {
              "chart": {
                "__spread_0": {
                  "argument": {
                    "__ref": "defaultChart",
                  },
                  "type": "spread",
                },
                "data": {
                  "__ref": "metrics",
                },
              },
              "title": "Metrics",
            },
          ],
          "title": {
            "left": {
              "__ref": "userTitle",
            },
            "operator": "??",
            "right": "Dashboard",
            "type": "binary",
          },
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Main dashboard view",
          },
        },
        "type": "from",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 18,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Chart": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [
          {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
        ],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Main dashboard view",
            },
            "name": "alt_text",
            "type": "trait",
          },
        ],
        "id": "./ui/Chart.holo",
        "loc": {
          "end": {
            "column": 2,
            "line": 21,
          },
          "start": {
            "column": 18,
            "line": 1,
          },
        },
        "name": "./ui/Chart.holo",
        "properties": {
          "Dashboard": true,
          "__spread_BaseLayout": {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
          "composition": true,
          "panels": [
            {
              "__ref": "ui_panel",
            },
            {
              "content": {
                "target": {
                  "__ref": "statusText",
                },
                "type": "nullCoalescingAssignment",
                "value": "Ready",
              },
              "title": "Status",
            },
            {
              "__ref": "ui_panel",
            },
            {
              "chart": {
                "__spread_0": {
                  "argument": {
                    "__ref": "defaultChart",
                  },
                  "type": "spread",
                },
                "data": {
                  "__ref": "metrics",
                },
              },
              "title": "Metrics",
            },
          ],
          "title": {
            "left": {
              "__ref": "userTitle",
            },
            "operator": "??",
            "right": "Dashboard",
            "type": "binary",
          },
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Main dashboard view",
          },
        },
        "type": "from",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 21,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 18,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Chart": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [
            {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
          ],
          "directives": [
            {
              "config": {},
              "name": "accessible",
              "type": "trait",
            },
            {
              "config": {
                "default": "Main dashboard view",
              },
              "name": "alt_text",
              "type": "trait",
            },
          ],
          "id": "./ui/Chart.holo",
          "loc": {
            "end": {
              "column": 2,
              "line": 21,
            },
            "start": {
              "column": 18,
              "line": 1,
            },
          },
          "name": "./ui/Chart.holo",
          "properties": {
            "Dashboard": true,
            "__spread_BaseLayout": {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
            "composition": true,
            "panels": [
              {
                "__ref": "ui_panel",
              },
              {
                "content": {
                  "target": {
                    "__ref": "statusText",
                  },
                  "type": "nullCoalescingAssignment",
                  "value": "Ready",
                },
                "title": "Status",
              },
              {
                "__ref": "ui_panel",
              },
              {
                "chart": {
                  "__spread_0": {
                    "argument": {
                      "__ref": "defaultChart",
                    },
                    "type": "spread",
                  },
                  "data": {
                    "__ref": "metrics",
                  },
                },
                "title": "Metrics",
              },
            ],
            "title": {
              "left": {
                "__ref": "userTitle",
              },
              "operator": "??",
              "right": "Dashboard",
              "type": "binary",
            },
          },
          "traits": Map {
            "accessible" => {},
            "alt_text" => {
              "default": "Main dashboard view",
            },
          },
          "type": "from",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 18,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Chart": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [
            {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
          ],
          "directives": [
            {
              "config": {},
              "name": "accessible",
              "type": "trait",
            },
            {
              "config": {
                "default": "Main dashboard view",
              },
              "name": "alt_text",
              "type": "trait",
            },
          ],
          "id": "./ui/Chart.holo",
          "loc": {
            "end": {
              "column": 2,
              "line": 21,
            },
            "start": {
              "column": 18,
              "line": 1,
            },
          },
          "name": "./ui/Chart.holo",
          "properties": {
            "Dashboard": true,
            "__spread_BaseLayout": {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
            "composition": true,
            "panels": [
              {
                "__ref": "ui_panel",
              },
              {
                "content": {
                  "target": {
                    "__ref": "statusText",
                  },
                  "type": "nullCoalescingAssignment",
                  "value": "Ready",
                },
                "title": "Status",
              },
              {
                "__ref": "ui_panel",
              },
              {
                "chart": {
                  "__spread_0": {
                    "argument": {
                      "__ref": "defaultChart",
                    },
                    "type": "spread",
                  },
                  "data": {
                    "__ref": "metrics",
                  },
                },
                "title": "Metrics",
              },
            ],
            "title": {
              "left": {
                "__ref": "userTitle",
              },
              "operator": "??",
              "right": "Dashboard",
              "type": "binary",
            },
          },
          "traits": Map {
            "accessible" => {},
            "alt_text" => {
              "default": "Main dashboard view",
            },
          },
          "type": "from",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 21,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Complex Real-World AST Examples > interactive scene AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 6,
                  "line": 10,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "red",
                "geometry": "sphere",
                "id": "orb1",
                "position": {
                  "x": -1,
                  "y": 1,
                  "z": -2,
                },
              },
              "traits": Map {
                "grabbable" => {},
                "throwable" => {},
              },
              "type": "orbs",
            },
            {
              "children": [
                {
                  "children": [],
                  "directives": [],
                  "id": "idle",
                  "loc": {
                    "end": {
                      "column": 6,
                      "line": 25,
                    },
                    "start": {
                      "column": 5,
                      "line": 23,
                    },
                  },
                  "name": "idle",
                  "properties": {
                    "grabbed": true,
                    "on": "grab",
                  },
                  "traits": Map {},
                  "type": "state",
                },
                {
                  "children": [],
                  "directives": [],
                  "id": "grabbed",
                  "loc": {
                    "end": {
                      "column": 6,
                      "line": 28,
                    },
                    "start": {
                      "column": 5,
                      "line": 26,
                    },
                  },
                  "name": "grabbed",
                  "properties": {
                    "flying": true,
                    "on": "throw",
                  },
                  "traits": Map {},
                  "type": "state",
                },
                {
                  "children": [],
                  "directives": [],
                  "id": "flying",
                  "loc": {
                    "end": {
                      "column": 6,
                      "line": 31,
                    },
                    "start": {
                      "column": 5,
                      "line": 29,
                    },
                  },
                  "name": "flying",
                  "properties": {
                    "idle": true,
                    "on": "land",
                  },
                  "traits": Map {},
                  "type": "state",
                },
              ],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 32,
                },
                "start": {
                  "column": 7,
                  "line": 12,
                },
              },
              "name": undefined,
              "properties": {
                "OrbController": true,
                "color": "blue",
                "geometry": "sphere",
                "initial": "idle",
                "position": {
                  "x": 1,
                  "y": 1,
                  "z": -2,
                },
                "state-machine": true,
              },
              "traits": Map {
                "grabbable" => {},
                "throwable" => {},
              },
              "type": "id",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 6,
                "line": 10,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "red",
              "geometry": "sphere",
              "id": "orb1",
              "position": {
                "x": -1,
                "y": 1,
                "z": -2,
              },
            },
            "traits": Map {
              "grabbable" => {},
              "throwable" => {},
            },
            "type": "orbs",
          },
          {
            "children": [
              {
                "children": [],
                "directives": [],
                "id": "idle",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 25,
                  },
                  "start": {
                    "column": 5,
                    "line": 23,
                  },
                },
                "name": "idle",
                "properties": {
                  "grabbed": true,
                  "on": "grab",
                },
                "traits": Map {},
                "type": "state",
              },
              {
                "children": [],
                "directives": [],
                "id": "grabbed",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 28,
                  },
                  "start": {
                    "column": 5,
                    "line": 26,
                  },
                },
                "name": "grabbed",
                "properties": {
                  "flying": true,
                  "on": "throw",
                },
                "traits": Map {},
                "type": "state",
              },
              {
                "children": [],
                "directives": [],
                "id": "flying",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 31,
                  },
                  "start": {
                    "column": 5,
                    "line": 29,
                  },
                },
                "name": "flying",
                "properties": {
                  "idle": true,
                  "on": "land",
                },
                "traits": Map {},
                "type": "state",
              },
            ],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 32,
              },
              "start": {
                "column": 7,
                "line": 12,
              },
            },
            "name": undefined,
            "properties": {
              "OrbController": true,
              "color": "blue",
              "geometry": "sphere",
              "initial": "idle",
              "position": {
                "x": 1,
                "y": 1,
                "z": -2,
              },
              "state-machine": true,
            },
            "traits": Map {
              "grabbable" => {},
              "throwable" => {},
            },
            "type": "id",
          },
        ],
        "directives": [],
        "id": "InteractiveScene",
        "loc": {
          "end": {
            "column": 2,
            "line": 33,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "InteractiveScene",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 6,
                  "line": 10,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "red",
                "geometry": "sphere",
                "id": "orb1",
                "position": {
                  "x": -1,
                  "y": 1,
                  "z": -2,
                },
              },
              "traits": Map {
                "grabbable" => {},
                "throwable" => {},
              },
              "type": "orbs",
            },
            {
              "children": [
                {
                  "children": [],
                  "directives": [],
                  "id": "idle",
                  "loc": {
                    "end": {
                      "column": 6,
                      "line": 25,
                    },
                    "start": {
                      "column": 5,
                      "line": 23,
                    },
                  },
                  "name": "idle",
                  "properties": {
                    "grabbed": true,
                    "on": "grab",
                  },
                  "traits": Map {},
                  "type": "state",
                },
                {
                  "children": [],
                  "directives": [],
                  "id": "grabbed",
                  "loc": {
                    "end": {
                      "column": 6,
                      "line": 28,
                    },
                    "start": {
                      "column": 5,
                      "line": 26,
                    },
                  },
                  "name": "grabbed",
                  "properties": {
                    "flying": true,
                    "on": "throw",
                  },
                  "traits": Map {},
                  "type": "state",
                },
                {
                  "children": [],
                  "directives": [],
                  "id": "flying",
                  "loc": {
                    "end": {
                      "column": 6,
                      "line": 31,
                    },
                    "start": {
                      "column": 5,
                      "line": 29,
                    },
                  },
                  "name": "flying",
                  "properties": {
                    "idle": true,
                    "on": "land",
                  },
                  "traits": Map {},
                  "type": "state",
                },
              ],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 32,
                },
                "start": {
                  "column": 7,
                  "line": 12,
                },
              },
              "name": undefined,
              "properties": {
                "OrbController": true,
                "color": "blue",
                "geometry": "sphere",
                "initial": "idle",
                "position": {
                  "x": 1,
                  "y": 1,
                  "z": -2,
                },
                "state-machine": true,
              },
              "traits": Map {
                "grabbable" => {},
                "throwable" => {},
              },
              "type": "id",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 6,
                "line": 10,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "red",
              "geometry": "sphere",
              "id": "orb1",
              "position": {
                "x": -1,
                "y": 1,
                "z": -2,
              },
            },
            "traits": Map {
              "grabbable" => {},
              "throwable" => {},
            },
            "type": "orbs",
          },
          {
            "children": [
              {
                "children": [],
                "directives": [],
                "id": "idle",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 25,
                  },
                  "start": {
                    "column": 5,
                    "line": 23,
                  },
                },
                "name": "idle",
                "properties": {
                  "grabbed": true,
                  "on": "grab",
                },
                "traits": Map {},
                "type": "state",
              },
              {
                "children": [],
                "directives": [],
                "id": "grabbed",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 28,
                  },
                  "start": {
                    "column": 5,
                    "line": 26,
                  },
                },
                "name": "grabbed",
                "properties": {
                  "flying": true,
                  "on": "throw",
                },
                "traits": Map {},
                "type": "state",
              },
              {
                "children": [],
                "directives": [],
                "id": "flying",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 31,
                  },
                  "start": {
                    "column": 5,
                    "line": 29,
                  },
                },
                "name": "flying",
                "properties": {
                  "idle": true,
                  "on": "land",
                },
                "traits": Map {},
                "type": "state",
              },
            ],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 32,
              },
              "start": {
                "column": 7,
                "line": 12,
              },
            },
            "name": undefined,
            "properties": {
              "OrbController": true,
              "color": "blue",
              "geometry": "sphere",
              "initial": "idle",
              "position": {
                "x": 1,
                "y": 1,
                "z": -2,
              },
              "state-machine": true,
            },
            "traits": Map {
              "grabbable" => {},
              "throwable" => {},
            },
            "type": "id",
          },
        ],
        "directives": [],
        "id": "InteractiveScene",
        "loc": {
          "end": {
            "column": 2,
            "line": 33,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "InteractiveScene",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 33,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 6,
                "line": 10,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "red",
              "geometry": "sphere",
              "id": "orb1",
              "position": {
                "x": -1,
                "y": 1,
                "z": -2,
              },
            },
            "traits": Map {
              "grabbable" => {},
              "throwable" => {},
            },
            "type": "orbs",
          },
          {
            "children": [
              {
                "children": [],
                "directives": [],
                "id": "idle",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 25,
                  },
                  "start": {
                    "column": 5,
                    "line": 23,
                  },
                },
                "name": "idle",
                "properties": {
                  "grabbed": true,
                  "on": "grab",
                },
                "traits": Map {},
                "type": "state",
              },
              {
                "children": [],
                "directives": [],
                "id": "grabbed",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 28,
                  },
                  "start": {
                    "column": 5,
                    "line": 26,
                  },
                },
                "name": "grabbed",
                "properties": {
                  "flying": true,
                  "on": "throw",
                },
                "traits": Map {},
                "type": "state",
              },
              {
                "children": [],
                "directives": [],
                "id": "flying",
                "loc": {
                  "end": {
                    "column": 6,
                    "line": 31,
                  },
                  "start": {
                    "column": 5,
                    "line": 29,
                  },
                },
                "name": "flying",
                "properties": {
                  "idle": true,
                  "on": "land",
                },
                "traits": Map {},
                "type": "state",
              },
            ],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 32,
              },
              "start": {
                "column": 7,
                "line": 12,
              },
            },
            "name": undefined,
            "properties": {
              "OrbController": true,
              "color": "blue",
              "geometry": "sphere",
              "initial": "idle",
              "position": {
                "x": 1,
                "y": 1,
                "z": -2,
              },
              "state-machine": true,
            },
            "traits": Map {
              "grabbable" => {},
              "throwable" => {},
            },
            "type": "id",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "grabbable",
              "type": "trait",
            },
            {
              "config": {},
              "name": "throwable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 6,
              "line": 10,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "color": "red",
            "geometry": "sphere",
            "id": "orb1",
            "position": {
              "x": -1,
              "y": 1,
              "z": -2,
            },
          },
          "traits": Map {
            "grabbable" => {},
            "throwable" => {},
          },
          "type": "orbs",
        },
        {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": "idle",
              "loc": {
                "end": {
                  "column": 6,
                  "line": 25,
                },
                "start": {
                  "column": 5,
                  "line": 23,
                },
              },
              "name": "idle",
              "properties": {
                "grabbed": true,
                "on": "grab",
              },
              "traits": Map {},
              "type": "state",
            },
            {
              "children": [],
              "directives": [],
              "id": "grabbed",
              "loc": {
                "end": {
                  "column": 6,
                  "line": 28,
                },
                "start": {
                  "column": 5,
                  "line": 26,
                },
              },
              "name": "grabbed",
              "properties": {
                "flying": true,
                "on": "throw",
              },
              "traits": Map {},
              "type": "state",
            },
            {
              "children": [],
              "directives": [],
              "id": "flying",
              "loc": {
                "end": {
                  "column": 6,
                  "line": 31,
                },
                "start": {
                  "column": 5,
                  "line": 29,
                },
              },
              "name": "flying",
              "properties": {
                "idle": true,
                "on": "land",
              },
              "traits": Map {},
              "type": "state",
            },
          ],
          "directives": [
            {
              "config": {},
              "name": "grabbable",
              "type": "trait",
            },
            {
              "config": {},
              "name": "throwable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 4,
              "line": 32,
            },
            "start": {
              "column": 7,
              "line": 12,
            },
          },
          "name": undefined,
          "properties": {
            "OrbController": true,
            "color": "blue",
            "geometry": "sphere",
            "initial": "idle",
            "position": {
              "x": 1,
              "y": 1,
              "z": -2,
            },
            "state-machine": true,
          },
          "traits": Map {
            "grabbable" => {},
            "throwable" => {},
          },
          "type": "id",
        },
      ],
      "directives": [],
      "id": "InteractiveScene",
      "loc": {
        "end": {
          "column": 2,
          "line": 33,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "InteractiveScene",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 11,
      "context": "  10 |     },
  11 |     {
> 12 |       id: "orb2",
                ^
  13 |       geometry: "sphere",
  14 |       color: "blue",",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 12,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 25,
      "context": "  11 |     {
  12 |       id: "orb2",
> 13 |       geometry: "sphere",
                              ^
  14 |       color: "blue",
  15 |       position: { x: 1, y: 1, z: -2 },",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 13,
      "message": "HSP001: Unexpected token in properties: COMMA",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 20,
      "context": "  12 |       id: "orb2",
  13 |       geometry: "sphere",
> 14 |       color: "blue",
                         ^
  15 |       position: { x: 1, y: 1, z: -2 },
  16 |       @grabbable,",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 14,
      "message": "HSP001: Unexpected token in properties: COMMA",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 38,
      "context": "  13 |       geometry: "sphere",
  14 |       color: "blue",
> 15 |       position: { x: 1, y: 1, z: -2 },
                                           ^
  16 |       @grabbable,
  17 |       @throwable",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 15,
      "message": "HSP001: Unexpected token in properties: COMMA",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 17,
      "context": "  14 |       color: "blue",
  15 |       position: { x: 1, y: 1, z: -2 },
> 16 |       @grabbable,
                      ^
  17 |       @throwable
  18 |     }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 16,
      "message": "HSP001: Unexpected token in properties: COMMA",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 5,
      "context": "  16 |       @grabbable,
  17 |       @throwable
> 18 |     }
          ^
  19 |   ]
  20 |   ",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 18,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 18,
      "context": "  22 |     initial: "idle"
  23 |     state idle {
> 24 |       on: "grab" -> "grabbed"
                       ^
  25 |     }
  26 |     state grabbed {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 24,
      "message": "HSP001: Unexpected token ARROW "->" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 19,
      "context": "  25 |     }
  26 |     state grabbed {
> 27 |       on: "throw" -> "flying"
                        ^
  28 |     }
  29 |     state flying {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 27,
      "message": "HSP001: Unexpected token ARROW "->" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 18,
      "context": "  28 |     }
  29 |     state flying {
> 30 |       on: "land" -> "idle"
                       ^
  31 |     }
  32 |   }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 30,
      "message": "HSP001: Unexpected token ARROW "->" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Control Flow AST Nodes > conditional logic AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "condition": true,
          "doOtherThing": true,
          "doSomething": true,
          "else": true,
          "if": true,
        },
        "traits": Map {},
        "type": "ConditionalTest",
      },
    ],
    "children": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "condition": true,
          "doOtherThing": true,
          "doSomething": true,
          "else": true,
          "if": true,
        },
        "traits": Map {},
        "type": "ConditionalTest",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 0,
              "line": 0,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "condition": true,
            "doOtherThing": true,
            "doSomething": true,
            "else": true,
            "if": true,
          },
          "traits": Map {},
          "type": "ConditionalTest",
        },
      ],
      "children": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 0,
              "line": 0,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "condition": true,
            "doOtherThing": true,
            "doSomething": true,
            "else": true,
            "if": true,
          },
          "traits": Map {},
          "type": "ConditionalTest",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 6,
      "context": "  1 | logic ConditionalTest {
> 2 |   if (condition) {
          ^
  3 |     doSomething()
  4 |   } else {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token LPAREN "(" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 16,
      "context": "  1 | logic ConditionalTest {
> 2 |   if (condition) {
                    ^
  3 |     doSomething()
  4 |   } else {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token RPAREN ")" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 18,
      "context": "  1 | logic ConditionalTest {
> 2 |   if (condition) {
                      ^
  3 |     doSomething()
  4 |   } else {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token LBRACE "{" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 16,
      "context": "  1 | logic ConditionalTest {
  2 |   if (condition) {
> 3 |     doSomething()
                    ^
  4 |   } else {
  5 |     doOtherThing()",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP001: Unexpected token LPAREN "(" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 10,
      "context": "  2 |   if (condition) {
  3 |     doSomething()
> 4 |   } else {
              ^
  5 |     doOtherThing()
  6 |   }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token LBRACE "{" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 17,
      "context": "  3 |     doSomething()
  4 |   } else {
> 5 |     doOtherThing()
                     ^
  6 |   }
  7 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Unexpected token LPAREN "(" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  5 |     doOtherThing()
  6 |   }
> 7 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 7,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Control Flow AST Nodes > state machine AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "idle",
            "loc": {
              "end": {
                "column": 4,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "name": "idle",
            "properties": {
              "on": "start",
              "running": true,
            },
            "traits": Map {},
            "type": "state",
          },
          {
            "children": [],
            "directives": [],
            "id": "running",
            "loc": {
              "end": {
                "column": 4,
                "line": 10,
              },
              "start": {
                "column": 3,
                "line": 8,
              },
            },
            "name": "running",
            "properties": {
              "idle": true,
              "on": "stop",
            },
            "traits": Map {},
            "type": "state",
          },
        ],
        "directives": [],
        "id": "SimpleMachine",
        "loc": {
          "end": {
            "column": 2,
            "line": 11,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SimpleMachine",
        "properties": {
          "initial": "idle",
        },
        "traits": Map {},
        "type": "state-machine",
      },
    ],
    "children": [
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "idle",
            "loc": {
              "end": {
                "column": 4,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "name": "idle",
            "properties": {
              "on": "start",
              "running": true,
            },
            "traits": Map {},
            "type": "state",
          },
          {
            "children": [],
            "directives": [],
            "id": "running",
            "loc": {
              "end": {
                "column": 4,
                "line": 10,
              },
              "start": {
                "column": 3,
                "line": 8,
              },
            },
            "name": "running",
            "properties": {
              "idle": true,
              "on": "stop",
            },
            "traits": Map {},
            "type": "state",
          },
        ],
        "directives": [],
        "id": "SimpleMachine",
        "loc": {
          "end": {
            "column": 2,
            "line": 11,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SimpleMachine",
        "properties": {
          "initial": "idle",
        },
        "traits": Map {},
        "type": "state-machine",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 11,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [
        {
          "children": [],
          "directives": [],
          "id": "idle",
          "loc": {
            "end": {
              "column": 4,
              "line": 6,
            },
            "start": {
              "column": 3,
              "line": 4,
            },
          },
          "name": "idle",
          "properties": {
            "on": "start",
            "running": true,
          },
          "traits": Map {},
          "type": "state",
        },
        {
          "children": [],
          "directives": [],
          "id": "running",
          "loc": {
            "end": {
              "column": 4,
              "line": 10,
            },
            "start": {
              "column": 3,
              "line": 8,
            },
          },
          "name": "running",
          "properties": {
            "idle": true,
            "on": "stop",
          },
          "traits": Map {},
          "type": "state",
        },
      ],
      "directives": [],
      "id": "SimpleMachine",
      "loc": {
        "end": {
          "column": 2,
          "line": 11,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "SimpleMachine",
      "properties": {
        "initial": "idle",
      },
      "traits": Map {},
      "type": "state-machine",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 17,
      "context": "  3 |   
  4 |   state idle {
> 5 |     on: "start" -> "running"
                     ^
  6 |   }
  7 |   ",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Unexpected token ARROW "->" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 16,
      "context": "   7 |   
   8 |   state running {
>  9 |     on: "stop" -> "idle"
                     ^
  10 |   }
  11 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 9,
      "message": "HSP001: Unexpected token ARROW "->" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Control Flow AST Nodes > timeline AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "RotationAnimation",
        "loc": {
          "end": {
            "column": 2,
            "line": 8,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RotationAnimation",
        "properties": {
          "duration": 1000,
          "keyframes": [
            {
              "rotation": {
                "y": 0,
              },
              "time": 0,
            },
            {
              "rotation": {
                "y": 360,
              },
              "time": 1000,
            },
          ],
          "target": "cube",
        },
        "traits": Map {},
        "type": "timeline",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "RotationAnimation",
        "loc": {
          "end": {
            "column": 2,
            "line": 8,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RotationAnimation",
        "properties": {
          "duration": 1000,
          "keyframes": [
            {
              "rotation": {
                "y": 0,
              },
              "time": 0,
            },
            {
              "rotation": {
                "y": 360,
              },
              "time": 1000,
            },
          ],
          "target": "cube",
        },
        "traits": Map {},
        "type": "timeline",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 8,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "RotationAnimation",
      "loc": {
        "end": {
          "column": 2,
          "line": 8,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "RotationAnimation",
      "properties": {
        "duration": 1000,
        "keyframes": [
          {
            "rotation": {
              "y": 0,
            },
            "time": 0,
          },
          {
            "rotation": {
              "y": 360,
            },
            "time": 1000,
          },
        ],
        "target": "cube",
      },
      "traits": Map {},
      "type": "timeline",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > accessibility traits 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Submit button",
            },
            "name": "alt_text",
            "type": "trait",
          },
          {
            "config": {
              "default": "Press to submit form",
            },
            "name": "screen_reader",
            "type": "trait",
          },
        ],
        "id": "AccessibleButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "AccessibleButton",
        "properties": {
          "text": "Click me",
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Submit button",
          },
          "screen_reader" => {
            "default": "Press to submit form",
          },
        },
        "type": "ui_button",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Submit button",
            },
            "name": "alt_text",
            "type": "trait",
          },
          {
            "config": {
              "default": "Press to submit form",
            },
            "name": "screen_reader",
            "type": "trait",
          },
        ],
        "id": "AccessibleButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "AccessibleButton",
        "properties": {
          "text": "Click me",
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Submit button",
          },
          "screen_reader" => {
            "default": "Press to submit form",
          },
        },
        "type": "ui_button",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "accessible",
          "type": "trait",
        },
        {
          "config": {
            "default": "Submit button",
          },
          "name": "alt_text",
          "type": "trait",
        },
        {
          "config": {
            "default": "Press to submit form",
          },
          "name": "screen_reader",
          "type": "trait",
        },
      ],
      "id": "AccessibleButton",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "AccessibleButton",
      "properties": {
        "text": "Click me",
      },
      "traits": Map {
        "accessible" => {},
        "alt_text" => {
          "default": "Submit button",
        },
        "screen_reader" => {
          "default": "Press to submit form",
        },
      },
      "type": "ui_button",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > multiple trait directives 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "hoverable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 6,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {
                "grabbable" => {},
                "hoverable" => {},
                "throwable" => {},
              },
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "hoverable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "grabbable" => {},
              "hoverable" => {},
              "throwable" => {},
            },
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "InteractiveOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "InteractiveOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "hoverable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 6,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {
                "grabbable" => {},
                "hoverable" => {},
                "throwable" => {},
              },
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "hoverable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "grabbable" => {},
              "hoverable" => {},
              "throwable" => {},
            },
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "InteractiveOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "InteractiveOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "hoverable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "grabbable" => {},
              "hoverable" => {},
              "throwable" => {},
            },
            "type": "geometry",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "grabbable",
              "type": "trait",
            },
            {
              "config": {},
              "name": "hoverable",
              "type": "trait",
            },
            {
              "config": {},
              "name": "throwable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 6,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {
            "grabbable" => {},
            "hoverable" => {},
            "throwable" => {},
          },
          "type": "geometry",
        },
      ],
      "directives": [],
      "id": "InteractiveOrb",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "InteractiveOrb",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 13,
      "context": "  1 | composition InteractiveOrb {
> 2 |   geometry: "sphere"
                 ^
  3 |   @grabbable
  4 |   @hoverable",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  4 |   @hoverable
  5 |   @throwable
> 6 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 6,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  4 |   @hoverable
  5 |   @throwable
> 6 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 6,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > single trait directive 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {
                "grabbable" => {},
              },
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "grabbable" => {},
            },
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "GrabbableOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "GrabbableOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {
                "grabbable" => {},
              },
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "grabbable" => {},
            },
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "GrabbableOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "GrabbableOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "grabbable" => {},
            },
            "type": "geometry",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "grabbable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {
            "grabbable" => {},
          },
          "type": "geometry",
        },
      ],
      "directives": [],
      "id": "GrabbableOrb",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "GrabbableOrb",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 13,
      "context": "  1 | composition GrabbableOrb {
> 2 |   geometry: "sphere"
                 ^
  3 |   @grabbable
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   geometry: "sphere"
  3 |   @grabbable
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   geometry: "sphere"
  3 |   @grabbable
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > trait with configuration 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {
                    "friction": 0.8,
                    "mass": 1.5,
                  },
                  "name": "physics",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {
                "physics" => {
                  "friction": 0.8,
                  "mass": 1.5,
                },
              },
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {
                  "friction": 0.8,
                  "mass": 1.5,
                },
                "name": "physics",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "physics" => {
                "friction": 0.8,
                "mass": 1.5,
              },
            },
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "ConfiguredOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ConfiguredOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {
                    "friction": 0.8,
                    "mass": 1.5,
                  },
                  "name": "physics",
                  "type": "trait",
                },
              ],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {
                "physics" => {
                  "friction": 0.8,
                  "mass": 1.5,
                },
              },
              "type": "geometry",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {
                  "friction": 0.8,
                  "mass": 1.5,
                },
                "name": "physics",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "physics" => {
                "friction": 0.8,
                "mass": 1.5,
              },
            },
            "type": "geometry",
          },
        ],
        "directives": [],
        "id": "ConfiguredOrb",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ConfiguredOrb",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {
                  "friction": 0.8,
                  "mass": 1.5,
                },
                "name": "physics",
                "type": "trait",
              },
            ],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {
              "physics" => {
                "friction": 0.8,
                "mass": 1.5,
              },
            },
            "type": "geometry",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [
            {
              "config": {
                "friction": 0.8,
                "mass": 1.5,
              },
              "name": "physics",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {
            "physics" => {
              "friction": 0.8,
              "mass": 1.5,
            },
          },
          "type": "geometry",
        },
      ],
      "directives": [],
      "id": "ConfiguredOrb",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ConfiguredOrb",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 13,
      "context": "  1 | composition ConfiguredOrb {
> 2 |   geometry: "sphere"
                 ^
  3 |   @physics(mass: 1.5, friction: 0.8)
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   geometry: "sphere"
  3 |   @physics(mass: 1.5, friction: 0.8)
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   geometry: "sphere"
  3 |   @physics(mass: 1.5, friction: 0.8)
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [
    {
      "code": "HSP001",
      "column": 11,
      "context": "  1 | composition ConfiguredOrb {
  2 |   geometry: "sphere"
> 3 |   @physics(mass: 1.5, friction: 0.8)
               ^
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP001: Unknown directive @physics",
      "severity": "warning",
      "suggestion": undefined,
    },
  ],
}
`;

exports[`Parser AST Visual Regression > Edge Cases and Errors > deeply nested structure AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 8,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "level2": {
                  "level3": {
                    "value": "nested",
                  },
                },
              },
              "traits": Map {},
              "type": "level1",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 8,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "level2": {
                "level3": {
                  "value": "nested",
                },
              },
            },
            "traits": Map {},
            "type": "level1",
          },
        ],
        "directives": [],
        "id": "Deep",
        "loc": {
          "end": {
            "column": 2,
            "line": 9,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Deep",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 8,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "level2": {
                  "level3": {
                    "value": "nested",
                  },
                },
              },
              "traits": Map {},
              "type": "level1",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 8,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "level2": {
                "level3": {
                  "value": "nested",
                },
              },
            },
            "traits": Map {},
            "type": "level1",
          },
        ],
        "directives": [],
        "id": "Deep",
        "loc": {
          "end": {
            "column": 2,
            "line": 9,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Deep",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 9,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 8,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "level2": {
                "level3": {
                  "value": "nested",
                },
              },
            },
            "traits": Map {},
            "type": "level1",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 4,
              "line": 8,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "level2": {
              "level3": {
                "value": "nested",
              },
            },
          },
          "traits": Map {},
          "type": "level1",
        },
      ],
      "directives": [],
      "id": "Deep",
      "loc": {
        "end": {
          "column": 2,
          "line": 9,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Deep",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Edge Cases and Errors > empty composition AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Empty",
        "loc": {
          "end": {
            "column": 21,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Empty",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Empty",
        "loc": {
          "end": {
            "column": 21,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Empty",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 21,
        "line": 1,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "Empty",
      "loc": {
        "end": {
          "column": 21,
          "line": 1,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Empty",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Edge Cases and Errors > minimal single property AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 37,
                  "line": 1,
                },
                "start": {
                  "column": 23,
                  "line": 1,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 37,
                "line": 1,
              },
              "start": {
                "column": 23,
                "line": 1,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "Minimal",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Minimal",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 37,
                  "line": 1,
                },
                "start": {
                  "column": 23,
                  "line": 1,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 37,
                "line": 1,
              },
              "start": {
                "column": 23,
                "line": 1,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "Minimal",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Minimal",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 37,
                "line": 1,
              },
              "start": {
                "column": 23,
                "line": 1,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {},
            "type": "color",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 37,
              "line": 1,
            },
            "start": {
              "column": 23,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {},
          "type": "color",
        },
      ],
      "directives": [],
      "id": "Minimal",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Minimal",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 30,
      "context": "> 1 | composition Minimal { color: "red" }
                                  ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 1,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 36,
      "context": "> 1 | composition Minimal { color: "red" }
                                        ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 1,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 37,
      "context": "> 1 | composition Minimal { color: "red" }
                                         ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 1,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > complex expression combinations 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "a": true,
                "b": true,
                "c": {
                  "target": {
                    "__ref": "d",
                  },
                  "type": "nullCoalescingAssignment",
                  "value": {
                    "__ref": "e",
                  },
                },
                "spread": {
                  "__spread_0": {
                    "argument": {
                      "__ref": "base",
                    },
                    "type": "spread",
                  },
                  "override": {
                    "left": {
                      "__ref": "x",
                    },
                    "operator": "??",
                    "right": {
                      "__ref": "y",
                    },
                    "type": "binary",
                  },
                },
              },
              "traits": Map {},
              "type": "result",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "a": true,
              "b": true,
              "c": {
                "target": {
                  "__ref": "d",
                },
                "type": "nullCoalescingAssignment",
                "value": {
                  "__ref": "e",
                },
              },
              "spread": {
                "__spread_0": {
                  "argument": {
                    "__ref": "base",
                  },
                  "type": "spread",
                },
                "override": {
                  "left": {
                    "__ref": "x",
                  },
                  "operator": "??",
                  "right": {
                    "__ref": "y",
                  },
                  "type": "binary",
                },
              },
            },
            "traits": Map {},
            "type": "result",
          },
        ],
        "directives": [],
        "id": "ComplexExpr",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ComplexExpr",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "a": true,
                "b": true,
                "c": {
                  "target": {
                    "__ref": "d",
                  },
                  "type": "nullCoalescingAssignment",
                  "value": {
                    "__ref": "e",
                  },
                },
                "spread": {
                  "__spread_0": {
                    "argument": {
                      "__ref": "base",
                    },
                    "type": "spread",
                  },
                  "override": {
                    "left": {
                      "__ref": "x",
                    },
                    "operator": "??",
                    "right": {
                      "__ref": "y",
                    },
                    "type": "binary",
                  },
                },
              },
              "traits": Map {},
              "type": "result",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "a": true,
              "b": true,
              "c": {
                "target": {
                  "__ref": "d",
                },
                "type": "nullCoalescingAssignment",
                "value": {
                  "__ref": "e",
                },
              },
              "spread": {
                "__spread_0": {
                  "argument": {
                    "__ref": "base",
                  },
                  "type": "spread",
                },
                "override": {
                  "left": {
                    "__ref": "x",
                  },
                  "operator": "??",
                  "right": {
                    "__ref": "y",
                  },
                  "type": "binary",
                },
              },
            },
            "traits": Map {},
            "type": "result",
          },
        ],
        "directives": [],
        "id": "ComplexExpr",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ComplexExpr",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "a": true,
              "b": true,
              "c": {
                "target": {
                  "__ref": "d",
                },
                "type": "nullCoalescingAssignment",
                "value": {
                  "__ref": "e",
                },
              },
              "spread": {
                "__spread_0": {
                  "argument": {
                    "__ref": "base",
                  },
                  "type": "spread",
                },
                "override": {
                  "left": {
                    "__ref": "x",
                  },
                  "operator": "??",
                  "right": {
                    "__ref": "y",
                  },
                  "type": "binary",
                },
              },
            },
            "traits": Map {},
            "type": "result",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "a": true,
            "b": true,
            "c": {
              "target": {
                "__ref": "d",
              },
              "type": "nullCoalescingAssignment",
              "value": {
                "__ref": "e",
              },
            },
            "spread": {
              "__spread_0": {
                "argument": {
                  "__ref": "base",
                },
                "type": "spread",
              },
              "override": {
                "left": {
                  "__ref": "x",
                },
                "operator": "??",
                "right": {
                  "__ref": "y",
                },
                "type": "binary",
              },
            },
          },
          "traits": Map {},
          "type": "result",
        },
      ],
      "directives": [],
      "id": "ComplexExpr",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ComplexExpr",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 11,
      "context": "  1 | composition ComplexExpr {
> 2 |   result: (a ?? b) ? c : (d ??= e)
               ^
  3 |   spread: { ...base, override: x ?? y }
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: LPAREN",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 14,
      "context": "  1 | composition ComplexExpr {
> 2 |   result: (a ?? b) ? c : (d ??= e)
                  ^
  3 |   spread: { ...base, override: x ?? y }
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: NULL_COALESCE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 18,
      "context": "  1 | composition ComplexExpr {
> 2 |   result: (a ?? b) ? c : (d ??= e)
                      ^
  3 |   spread: { ...base, override: x ?? y }
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: RPAREN",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   result: (a ?? b) ? c : (d ??= e)
  3 |   spread: { ...base, override: x ?? y }
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   result: (a ?? b) ? c : (d ??= e)
  3 |   spread: { ...base, override: x ?? y }
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > null coalescing assignment 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "test",
            "loc": {
              "end": {
                "column": 4,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": "test",
            "properties": {
              "count": true,
              "default": true,
              "name": true,
            },
            "traits": Map {},
            "type": "function",
          },
        ],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {},
        "traits": Map {},
        "type": "AssignmentTest",
      },
    ],
    "children": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "test",
            "loc": {
              "end": {
                "column": 4,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": "test",
            "properties": {
              "count": true,
              "default": true,
              "name": true,
            },
            "traits": Map {},
            "type": "function",
          },
        ],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {},
        "traits": Map {},
        "type": "AssignmentTest",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": "test",
              "loc": {
                "end": {
                  "column": 4,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": "test",
              "properties": {
                "count": true,
                "default": true,
                "name": true,
              },
              "traits": Map {},
              "type": "function",
            },
          ],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 6,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {},
          "type": "AssignmentTest",
        },
      ],
      "children": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": "test",
              "loc": {
                "end": {
                  "column": 4,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": "test",
              "properties": {
                "count": true,
                "default": true,
                "name": true,
              },
              "traits": Map {},
              "type": "function",
            },
          ],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 6,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {},
          "type": "AssignmentTest",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 16,
      "context": "  1 | logic AssignmentTest {
> 2 |   function test() {
                    ^
  3 |     count ??= 0
  4 |     name ??= "default"",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: LPAREN",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 11,
      "context": "  1 | logic AssignmentTest {
  2 |   function test() {
> 3 |     count ??= 0
               ^
  4 |     name ??= "default"
  5 |   }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP001: Unexpected token NULL_COALESCE_ASSIGN "??=" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 10,
      "context": "  2 |   function test() {
  3 |     count ??= 0
> 4 |     name ??= "default"
              ^
  5 |   }
  6 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token NULL_COALESCE_ASSIGN "??=" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > null coalescing operator 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "size": {
                  "left": {
                    "__ref": "userSize",
                  },
                  "operator": "??",
                  "right": 1,
                  "type": "binary",
                },
              },
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "size": {
                "left": {
                  "__ref": "userSize",
                },
                "operator": "??",
                "right": 1,
                "type": "binary",
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "NullCoalesce",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NullCoalesce",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "size": {
                  "left": {
                    "__ref": "userSize",
                  },
                  "operator": "??",
                  "right": 1,
                  "type": "binary",
                },
              },
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "size": {
                "left": {
                  "__ref": "userSize",
                },
                "operator": "??",
                "right": 1,
                "type": "binary",
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "NullCoalesce",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NullCoalesce",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "size": {
                "left": {
                  "__ref": "userSize",
                },
                "operator": "??",
                "right": 1,
                "type": "binary",
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "size": {
              "left": {
                "__ref": "userSize",
              },
              "operator": "??",
              "right": 1,
              "type": "binary",
            },
          },
          "traits": Map {},
          "type": "color",
        },
      ],
      "directives": [],
      "id": "NullCoalesce",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "NullCoalesce",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 20,
      "context": "  1 | composition NullCoalesce {
> 2 |   color: userColor ?? "white"
                        ^
  3 |   size: userSize ?? 1.0
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: NULL_COALESCE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 23,
      "context": "  1 | composition NullCoalesce {
> 2 |   color: userColor ?? "white"
                           ^
  3 |   size: userSize ?? 1.0
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   color: userColor ?? "white"
  3 |   size: userSize ?? 1.0
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   color: userColor ?? "white"
  3 |   size: userSize ?? 1.0
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > spread expression in array 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [
                {
                  "loc": {
                    "end": {
                      "column": 22,
                      "line": 2,
                    },
                    "start": {
                      "column": 11,
                      "line": 2,
                    },
                  },
                  "target": "defaults",
                  "type": "spread",
                },
              ],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 3,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {},
              "type": "items",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [
              {
                "loc": {
                  "end": {
                    "column": 22,
                    "line": 2,
                  },
                  "start": {
                    "column": 11,
                    "line": 2,
                  },
                },
                "target": "defaults",
                "type": "spread",
              },
            ],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 3,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {},
            "type": "items",
          },
        ],
        "directives": [],
        "id": "ArraySpread",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArraySpread",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [
                {
                  "loc": {
                    "end": {
                      "column": 22,
                      "line": 2,
                    },
                    "start": {
                      "column": 11,
                      "line": 2,
                    },
                  },
                  "target": "defaults",
                  "type": "spread",
                },
              ],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 3,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {},
              "traits": Map {},
              "type": "items",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [
              {
                "loc": {
                  "end": {
                    "column": 22,
                    "line": 2,
                  },
                  "start": {
                    "column": 11,
                    "line": 2,
                  },
                },
                "target": "defaults",
                "type": "spread",
              },
            ],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 3,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {},
            "type": "items",
          },
        ],
        "directives": [],
        "id": "ArraySpread",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArraySpread",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [
              {
                "loc": {
                  "end": {
                    "column": 22,
                    "line": 2,
                  },
                  "start": {
                    "column": 11,
                    "line": 2,
                  },
                },
                "target": "defaults",
                "type": "spread",
              },
            ],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 3,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {},
            "traits": Map {},
            "type": "items",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [
            {
              "loc": {
                "end": {
                  "column": 22,
                  "line": 2,
                },
                "start": {
                  "column": 11,
                  "line": 2,
                },
              },
              "target": "defaults",
              "type": "spread",
            },
          ],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 3,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {},
          "type": "items",
        },
      ],
      "directives": [],
      "id": "ArraySpread",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ArraySpread",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 22,
      "context": "  1 | composition ArraySpread {
> 2 |   items: [...defaults, "extra"]
                          ^
  3 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: COMMA",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 24,
      "context": "  1 | composition ArraySpread {
> 2 |   items: [...defaults, "extra"]
                            ^
  3 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  1 | composition ArraySpread {
  2 |   items: [...defaults, "extra"]
> 3 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > spread expression in object 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 6,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "red",
              },
              "traits": Map {},
              "type": "BaseOrb",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 6,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "red",
            },
            "traits": Map {},
            "type": "BaseOrb",
          },
        ],
        "directives": [],
        "id": "SpreadTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SpreadTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 6,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "red",
              },
              "traits": Map {},
              "type": "BaseOrb",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 6,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "red",
            },
            "traits": Map {},
            "type": "BaseOrb",
          },
        ],
        "directives": [],
        "id": "SpreadTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SpreadTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 6,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "red",
            },
            "traits": Map {},
            "type": "BaseOrb",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 6,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "color": "red",
          },
          "traits": Map {},
          "type": "BaseOrb",
        },
      ],
      "directives": [],
      "id": "SpreadTest",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "SpreadTest",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   ...BaseOrb
  3 |   color: "red"
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   ...BaseOrb
  3 |   color: "red"
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > ternary operator 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "opacity": {
                  "condition": {
                    "__ref": "isVisible",
                  },
                  "falseValue": 0,
                  "trueValue": 1,
                  "type": "ternary",
                },
              },
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "opacity": {
                "condition": {
                  "__ref": "isVisible",
                },
                "falseValue": 0,
                "trueValue": 1,
                "type": "ternary",
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "TernaryTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "TernaryTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "opacity": {
                  "condition": {
                    "__ref": "isVisible",
                  },
                  "falseValue": 0,
                  "trueValue": 1,
                  "type": "ternary",
                },
              },
              "traits": Map {},
              "type": "color",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "opacity": {
                "condition": {
                  "__ref": "isVisible",
                },
                "falseValue": 0,
                "trueValue": 1,
                "type": "ternary",
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "directives": [],
        "id": "TernaryTest",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "TernaryTest",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "opacity": {
                "condition": {
                  "__ref": "isVisible",
                },
                "falseValue": 0,
                "trueValue": 1,
                "type": "ternary",
              },
            },
            "traits": Map {},
            "type": "color",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 4,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "opacity": {
              "condition": {
                "__ref": "isVisible",
              },
              "falseValue": 0,
              "trueValue": 1,
              "type": "ternary",
            },
          },
          "traits": Map {},
          "type": "color",
        },
      ],
      "directives": [],
      "id": "TernaryTest",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "TernaryTest",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 19,
      "context": "  1 | composition TernaryTest {
> 2 |   color: isActive ? "green" : "gray"
                       ^
  3 |   opacity: isVisible ? 1.0 : 0.0
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: QUESTION",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 21,
      "context": "  1 | composition TernaryTest {
> 2 |   color: isActive ? "green" : "gray"
                         ^
  3 |   opacity: isVisible ? 1.0 : 0.0
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 31,
      "context": "  1 | composition TernaryTest {
> 2 |   color: isActive ? "green" : "gray"
                                   ^
  3 |   opacity: isVisible ? 1.0 : 0.0
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   color: isActive ? "green" : "gray"
  3 |   opacity: isVisible ? 1.0 : 0.0
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  2 |   color: isActive ? "green" : "gray"
  3 |   opacity: isVisible ? 1.0 : 0.0
> 4 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Import and Module System > import statement AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 42,
            "line": 1,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 42,
            "line": 1,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 42,
        "line": 1,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 42,
              "line": 1,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 42,
              "line": 1,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 42,
          "line": 1,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Import and Module System > multiple imports AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 18,
            "line": 2,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {
          "Panel": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Panel.holo",
        "loc": {
          "end": {
            "column": 23,
            "line": 3,
          },
          "start": {
            "column": 18,
            "line": 2,
          },
        },
        "name": "./ui/Panel.holo",
        "properties": {
          "Controller": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./logic/Controller.hsplus",
        "loc": {
          "end": {
            "column": 55,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 3,
          },
        },
        "name": "./logic/Controller.hsplus",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 18,
            "line": 2,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {
          "Panel": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Panel.holo",
        "loc": {
          "end": {
            "column": 23,
            "line": 3,
          },
          "start": {
            "column": 18,
            "line": 2,
          },
        },
        "name": "./ui/Panel.holo",
        "properties": {
          "Controller": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./logic/Controller.hsplus",
        "loc": {
          "end": {
            "column": 55,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 3,
          },
        },
        "name": "./logic/Controller.hsplus",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 55,
        "line": 3,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 18,
              "line": 2,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {
            "Panel": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Panel.holo",
          "loc": {
            "end": {
              "column": 23,
              "line": 3,
            },
            "start": {
              "column": 18,
              "line": 2,
            },
          },
          "name": "./ui/Panel.holo",
          "properties": {
            "Controller": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./logic/Controller.hsplus",
          "loc": {
            "end": {
              "column": 55,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 3,
            },
          },
          "name": "./logic/Controller.hsplus",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 18,
              "line": 2,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {
            "Panel": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Panel.holo",
          "loc": {
            "end": {
              "column": 23,
              "line": 3,
            },
            "start": {
              "column": 18,
              "line": 2,
            },
          },
          "name": "./ui/Panel.holo",
          "properties": {
            "Controller": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./logic/Controller.hsplus",
          "loc": {
            "end": {
              "column": 55,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 3,
            },
          },
          "name": "./logic/Controller.hsplus",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 55,
          "line": 3,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Import and Module System > using statement AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "BaseTemplate",
        "loc": {
          "end": {
            "column": 48,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BaseTemplate",
        "properties": {
          "from": true,
        },
        "traits": Map {},
        "type": "using",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "BaseTemplate",
        "loc": {
          "end": {
            "column": 48,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BaseTemplate",
        "properties": {
          "from": true,
        },
        "traits": Map {},
        "type": "using",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 48,
        "line": 1,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "BaseTemplate",
      "loc": {
        "end": {
          "column": 48,
          "line": 1,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "BaseTemplate",
      "properties": {
        "from": true,
      },
      "traits": Map {},
      "type": "using",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 25,
      "context": "> 1 | using BaseTemplate from "./templates/Base.holo"
                             ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 1,
      "message": "HSP001: Unexpected token in properties: STRING",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Snapshot Stability Tests > AST snapshot should be deterministic 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 6,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "a": 1,
                "b": 2,
                "c": 3,
              },
              "traits": Map {},
              "type": "props",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "a": 1,
              "b": 2,
              "c": 3,
            },
            "traits": Map {},
            "type": "props",
          },
        ],
        "directives": [],
        "id": "Stable",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Stable",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 4,
                  "line": 6,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "a": 1,
                "b": 2,
                "c": 3,
              },
              "traits": Map {},
              "type": "props",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "a": 1,
              "b": 2,
              "c": 3,
            },
            "traits": Map {},
            "type": "props",
          },
        ],
        "directives": [],
        "id": "Stable",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Stable",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 7,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 4,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "a": 1,
              "b": 2,
              "c": 3,
            },
            "traits": Map {},
            "type": "props",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 4,
              "line": 6,
            },
            "start": {
              "column": 3,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "a": 1,
            "b": 2,
            "c": 3,
          },
          "traits": Map {},
          "type": "props",
        },
      ],
      "directives": [],
      "id": "Stable",
      "loc": {
        "end": {
          "column": 2,
          "line": 7,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Stable",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Template and Composition Inheritance > spread with template AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 5,
                },
                "start": {
                  "column": 6,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "blue",
                "glow": true,
              },
              "traits": Map {},
              "type": "ButtonTemplate",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 5,
              },
              "start": {
                "column": 6,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "blue",
              "glow": true,
            },
            "traits": Map {},
            "type": "ButtonTemplate",
          },
        ],
        "directives": [],
        "id": "CustomButton",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "CustomButton",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": undefined,
              "loc": {
                "end": {
                  "column": 2,
                  "line": 5,
                },
                "start": {
                  "column": 6,
                  "line": 2,
                },
              },
              "name": undefined,
              "properties": {
                "color": "blue",
                "glow": true,
              },
              "traits": Map {},
              "type": "ButtonTemplate",
            },
          ],
          "configs": [],
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 5,
              },
              "start": {
                "column": 6,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "blue",
              "glow": true,
            },
            "traits": Map {},
            "type": "ButtonTemplate",
          },
        ],
        "directives": [],
        "id": "CustomButton",
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "CustomButton",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": undefined,
            "loc": {
              "end": {
                "column": 2,
                "line": 5,
              },
              "start": {
                "column": 6,
                "line": 2,
              },
            },
            "name": undefined,
            "properties": {
              "color": "blue",
              "glow": true,
            },
            "traits": Map {},
            "type": "ButtonTemplate",
          },
        ],
        "configs": [],
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 6,
              "line": 2,
            },
          },
          "name": undefined,
          "properties": {
            "color": "blue",
            "glow": true,
          },
          "traits": Map {},
          "type": "ButtonTemplate",
        },
      ],
      "directives": [],
      "id": "CustomButton",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "CustomButton",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 1,
      "context": "  3 |   color: "blue"
  4 |   glow: true
> 5 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Unexpected token in properties: RBRACE",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 2,
      "context": "  3 |   color: "blue"
  4 |   glow: true
> 5 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Template and Composition Inheritance > template definition AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {},
        "directives": [],
        "loc": {
          "end": {
            "column": 10,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ButtonTemplate",
        "type": "template",
      },
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 10,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "geometry": "cube",
          "scale": {
            "x": 0.2,
            "y": 0.05,
            "z": 0.1,
          },
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ButtonTemplate",
      },
    ],
    "children": [
      {
        "body": {},
        "directives": [],
        "loc": {
          "end": {
            "column": 10,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ButtonTemplate",
        "type": "template",
      },
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 10,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "geometry": "cube",
          "scale": {
            "x": 0.2,
            "y": 0.05,
            "z": 0.1,
          },
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ButtonTemplate",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "body": {},
          "directives": [],
          "loc": {
            "end": {
              "column": 10,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "ButtonTemplate",
          "type": "template",
        },
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "clickable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 10,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "geometry": "cube",
            "scale": {
              "x": 0.2,
              "y": 0.05,
              "z": 0.1,
            },
          },
          "traits": Map {
            "clickable" => {},
          },
          "type": "ButtonTemplate",
        },
      ],
      "children": [
        {
          "body": {},
          "directives": [],
          "loc": {
            "end": {
              "column": 10,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "ButtonTemplate",
          "type": "template",
        },
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "clickable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 10,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "geometry": "cube",
            "scale": {
              "x": 0.2,
              "y": 0.05,
              "z": 0.1,
            },
          },
          "traits": Map {
            "clickable" => {},
          },
          "type": "ButtonTemplate",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 10,
      "context": "> 1 | template ButtonTemplate {
              ^
  2 |   geometry: "cube"
  3 |   scale: { x: 0.2, y: 0.05, z: 0.1 }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 1,
      "message": "HSP001: Expected template name. Got IDENTIFIER "ButtonTemplate"",
      "severity": "error",
      "suggestion": "Did you mean 'template'?",
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Template and Composition Inheritance > template extension AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "RedButton",
        "loc": {
          "end": {
            "column": 23,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RedButton",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
      {
        "children": [],
        "directives": [],
        "id": "ButtonTemplate",
        "loc": {
          "end": {
            "column": 2,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 1,
          },
        },
        "name": "ButtonTemplate",
        "properties": {
          "color": "red",
        },
        "traits": Map {},
        "type": "extends",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "RedButton",
        "loc": {
          "end": {
            "column": 23,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RedButton",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
      {
        "children": [],
        "directives": [],
        "id": "ButtonTemplate",
        "loc": {
          "end": {
            "column": 2,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 1,
          },
        },
        "name": "ButtonTemplate",
        "properties": {
          "color": "red",
        },
        "traits": Map {},
        "type": "extends",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 3,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "body": {
            "children": [],
            "configs": [],
            "systems": [],
          },
          "children": [],
          "directives": [],
          "id": "RedButton",
          "loc": {
            "end": {
              "column": 23,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "RedButton",
          "properties": {},
          "traits": Map {},
          "type": "composition",
        },
        {
          "children": [],
          "directives": [],
          "id": "ButtonTemplate",
          "loc": {
            "end": {
              "column": 2,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 1,
            },
          },
          "name": "ButtonTemplate",
          "properties": {
            "color": "red",
          },
          "traits": Map {},
          "type": "extends",
        },
      ],
      "children": [
        {
          "body": {
            "children": [],
            "configs": [],
            "systems": [],
          },
          "children": [],
          "directives": [],
          "id": "RedButton",
          "loc": {
            "end": {
              "column": 23,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "RedButton",
          "properties": {},
          "traits": Map {},
          "type": "composition",
        },
        {
          "children": [],
          "directives": [],
          "id": "ButtonTemplate",
          "loc": {
            "end": {
              "column": 2,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 1,
            },
          },
          "name": "ButtonTemplate",
          "properties": {
            "color": "red",
          },
          "traits": Map {},
          "type": "extends",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 3,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > UI Components AST > ui component hierarchy AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "Dashboard",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Dashboard",
        "properties": {
          "children": [
            {
              "__ref": "ui_button",
            },
            {
              "text": "Start",
            },
            {
              "__ref": "ui_button",
            },
            {
              "text": "Stop",
            },
            {
              "__ref": "ui_text",
            },
            {
              "content": "Status: Ready",
            },
          ],
        },
        "traits": Map {},
        "type": "ui_panel",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "Dashboard",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Dashboard",
        "properties": {
          "children": [
            {
              "__ref": "ui_button",
            },
            {
              "text": "Start",
            },
            {
              "__ref": "ui_button",
            },
            {
              "text": "Stop",
            },
            {
              "__ref": "ui_text",
            },
            {
              "content": "Status: Ready",
            },
          ],
        },
        "traits": Map {},
        "type": "ui_panel",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 7,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "Dashboard",
      "loc": {
        "end": {
          "column": 2,
          "line": 7,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Dashboard",
      "properties": {
        "children": [
          {
            "__ref": "ui_button",
          },
          {
            "text": "Start",
          },
          {
            "__ref": "ui_button",
          },
          {
            "text": "Stop",
          },
          {
            "__ref": "ui_text",
          },
          {
            "content": "Status: Ready",
          },
        ],
      },
      "traits": Map {},
      "type": "ui_panel",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > UI Components AST > ui_button AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": "SubmitButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SubmitButton",
        "properties": {
          "height": 40,
          "text": "Submit",
          "width": 100,
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ui_button",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": "SubmitButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SubmitButton",
        "properties": {
          "height": 40,
          "text": "Submit",
          "width": 100,
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ui_button",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "clickable",
          "type": "trait",
        },
      ],
      "id": "SubmitButton",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "SubmitButton",
      "properties": {
        "height": 40,
        "text": "Submit",
        "width": 100,
      },
      "traits": Map {
        "clickable" => {},
      },
      "type": "ui_button",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > UI Components AST > ui_panel AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "ui_floating",
            "type": "trait",
          },
        ],
        "id": "Menu",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Menu",
        "properties": {
          "height": 300,
          "width": 400,
        },
        "traits": Map {
          "ui_floating" => {},
        },
        "type": "ui_panel",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "ui_floating",
            "type": "trait",
          },
        ],
        "id": "Menu",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Menu",
        "properties": {
          "height": 300,
          "width": 400,
        },
        "traits": Map {
          "ui_floating" => {},
        },
        "type": "ui_panel",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "ui_floating",
          "type": "trait",
        },
      ],
      "id": "Menu",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Menu",
      "properties": {
        "height": 300,
        "width": 400,
      },
      "traits": Map {
        "ui_floating" => {},
      },
      "type": "ui_panel",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [
    {
      "code": "HSP001",
      "column": 15,
      "context": "  2 |   width: 400
  3 |   height: 300
> 4 |   @ui_floating
                   ^
  5 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unknown directive @ui_floating",
      "severity": "warning",
      "suggestion": undefined,
    },
  ],
}
`;

exports[`Parser AST Visual Regression > Zone and Environment AST > environment settings AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "loc": {
          "end": {
            "column": 13,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "properties": {},
        "traits": Map {},
        "type": "environment",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 13,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "ambientColor": "#404040",
          "lighting": "soft",
          "skybox": "gradient",
        },
        "traits": Map {},
        "type": "MainScene",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "loc": {
          "end": {
            "column": 13,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "properties": {},
        "traits": Map {},
        "type": "environment",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 13,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "ambientColor": "#404040",
          "lighting": "soft",
          "skybox": "gradient",
        },
        "traits": Map {},
        "type": "MainScene",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "loc": {
            "end": {
              "column": 13,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "properties": {},
          "traits": Map {},
          "type": "environment",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 13,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "ambientColor": "#404040",
            "lighting": "soft",
            "skybox": "gradient",
          },
          "traits": Map {},
          "type": "MainScene",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "loc": {
            "end": {
              "column": 13,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "properties": {},
          "traits": Map {},
          "type": "environment",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 13,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "ambientColor": "#404040",
            "lighting": "soft",
            "skybox": "gradient",
          },
          "traits": Map {},
          "type": "MainScene",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Zone and Environment AST > zone definition AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "plane_detection",
            "type": "trait",
          },
        ],
        "id": "Gallery",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Gallery",
        "properties": {
          "bounds": {
            "center": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "size": {
              "x": 10,
              "y": 3,
              "z": 10,
            },
          },
        },
        "traits": Map {
          "plane_detection" => {},
        },
        "type": "zone",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "plane_detection",
            "type": "trait",
          },
        ],
        "id": "Gallery",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Gallery",
        "properties": {
          "bounds": {
            "center": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "size": {
              "x": 10,
              "y": 3,
              "z": 10,
            },
          },
        },
        "traits": Map {
          "plane_detection" => {},
        },
        "type": "zone",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 7,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "plane_detection",
          "type": "trait",
        },
      ],
      "id": "Gallery",
      "loc": {
        "end": {
          "column": 2,
          "line": 7,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Gallery",
      "properties": {
        "bounds": {
          "center": {
            "x": 0,
            "y": 0,
            "z": 0,
          },
          "size": {
            "x": 10,
            "y": 3,
            "z": 10,
          },
        },
      },
      "traits": Map {
        "plane_detection" => {},
      },
      "type": "zone",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;
