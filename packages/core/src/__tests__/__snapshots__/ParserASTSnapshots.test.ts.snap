// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`Parser AST Visual Regression > AST Consistency Across Parsing > parsing same source twice produces identical AST 1`] = `
{
  "ast": {
    "body": [],
    "children": [],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [],
      "children": [],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP300",
      "column": 30,
      "context": "  1 | composition Consistency {
  2 |   color: "red"
> 3 |   position: { x: 0, y: 1, z: -2 }
                                  ^
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP300: Unexpected token in expression: MINUS "-". Expected value, identifier, or expression",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 33,
      "context": "  1 | composition Consistency {
  2 |   color: "red"
> 3 |   position: { x: 0, y: 1, z: -2 }
                                     ^
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  2 |   color: "red"
  3 |   position: { x: 0, y: 1, z: -2 }
> 4 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > AST Node Properties > AST nodes should have line numbers 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "prop1": "value1",
            "prop2": "value2",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Test",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Test",
        "properties": {
          "prop1": "value1",
          "prop2": "value2",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "prop1": "value1",
            "prop2": "value2",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Test",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Test",
        "properties": {
          "prop1": "value1",
          "prop2": "value2",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "prop1": "value1",
          "prop2": "value2",
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "Test",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Test",
      "properties": {
        "prop1": "value1",
        "prop2": "value2",
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > AST Node Properties > AST should preserve source positions 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": "cyan",
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "PositionTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "PositionTest",
        "properties": {
          "color": "cyan",
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": "cyan",
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "PositionTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "PositionTest",
        "properties": {
          "color": "cyan",
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "color": "cyan",
          "geometry": "sphere",
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "PositionTest",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "PositionTest",
      "properties": {
        "color": "cyan",
        "geometry": "sphere",
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > array literal AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "colors": [
              "red",
              "green",
              "blue",
            ],
            "numbers": [
              1,
              2,
              3,
              4,
              5,
            ],
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "ArrayTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArrayTest",
        "properties": {
          "colors": [
            "red",
            "green",
            "blue",
          ],
          "numbers": [
            1,
            2,
            3,
            4,
            5,
          ],
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "colors": [
              "red",
              "green",
              "blue",
            ],
            "numbers": [
              1,
              2,
              3,
              4,
              5,
            ],
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "ArrayTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArrayTest",
        "properties": {
          "colors": [
            "red",
            "green",
            "blue",
          ],
          "numbers": [
            1,
            2,
            3,
            4,
            5,
          ],
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "colors": [
            "red",
            "green",
            "blue",
          ],
          "numbers": [
            1,
            2,
            3,
            4,
            5,
          ],
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "ArrayTest",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ArrayTest",
      "properties": {
        "colors": [
          "red",
          "green",
          "blue",
        ],
        "numbers": [
          1,
          2,
          3,
          4,
          5,
        ],
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > nested object AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "transform": {
              "position": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
              "rotation": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "NestedTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NestedTest",
        "properties": {
          "transform": {
            "position": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "rotation": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "transform": {
              "position": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
              "rotation": {
                "x": 0,
                "y": 0,
                "z": 0,
              },
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "NestedTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NestedTest",
        "properties": {
          "transform": {
            "position": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "rotation": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "transform": {
            "position": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "rotation": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
          },
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "NestedTest",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "NestedTest",
      "properties": {
        "transform": {
          "position": {
            "x": 0,
            "y": 0,
            "z": 0,
          },
          "rotation": {
            "x": 0,
            "y": 0,
            "z": 0,
          },
        },
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > object literal AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "BasicCube",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BasicCube",
        "properties": {
          "color": "red",
          "geometry": "cube",
          "scale": {
            "x": 1,
            "y": 1,
            "z": 1,
          },
        },
        "traits": Map {},
        "type": "object",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "BasicCube",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BasicCube",
        "properties": {
          "color": "red",
          "geometry": "cube",
          "scale": {
            "x": 1,
            "y": 1,
            "z": 1,
          },
        },
        "traits": Map {},
        "type": "object",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "BasicCube",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "BasicCube",
      "properties": {
        "color": "red",
        "geometry": "cube",
        "scale": {
          "x": 1,
          "y": 1,
          "z": 1,
        },
      },
      "traits": Map {},
      "type": "object",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Basic AST Structures > simple composition AST 1`] = `
{
  "ast": {
    "body": [],
    "children": [],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [],
      "children": [],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP300",
      "column": 32,
      "context": "  2 |   geometry: "sphere"
  3 |   color: "cyan"
> 4 |   position: { x: 0, y: 1.5, z: -2 }
                                    ^
  5 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP300: Unexpected token in expression: MINUS "-". Expected value, identifier, or expression",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 35,
      "context": "  2 |   geometry: "sphere"
  3 |   color: "cyan"
> 4 |   position: { x: 0, y: 1.5, z: -2 }
                                       ^
  5 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  3 |   color: "cyan"
  4 |   position: { x: 0, y: 1.5, z: -2 }
> 5 | }
     ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Complex Real-World AST Examples > dashboard with all features AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 18,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Chart": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [
          {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
        ],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Main dashboard view",
            },
            "name": "alt_text",
            "type": "trait",
          },
        ],
        "id": "./ui/Chart.holo",
        "loc": {
          "end": {
            "column": 2,
            "line": 21,
          },
          "start": {
            "column": 18,
            "line": 1,
          },
        },
        "name": "./ui/Chart.holo",
        "properties": {
          "Dashboard": true,
          "__spread_BaseLayout": {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
          "composition": true,
          "panels": [
            {
              "__ref": "ui_panel",
            },
            {
              "content": {
                "target": {
                  "__ref": "statusText",
                },
                "type": "nullCoalescingAssignment",
                "value": "Ready",
              },
              "title": "Status",
            },
            {
              "__ref": "ui_panel",
            },
            {
              "chart": {
                "__spread_0": {
                  "argument": {
                    "__ref": "defaultChart",
                  },
                  "type": "spread",
                },
                "data": {
                  "__ref": "metrics",
                },
              },
              "title": "Metrics",
            },
          ],
          "title": {
            "left": {
              "__ref": "userTitle",
            },
            "operator": "??",
            "right": "Dashboard",
            "type": "binary",
          },
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Main dashboard view",
          },
        },
        "type": "from",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 18,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Chart": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [
          {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
        ],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Main dashboard view",
            },
            "name": "alt_text",
            "type": "trait",
          },
        ],
        "id": "./ui/Chart.holo",
        "loc": {
          "end": {
            "column": 2,
            "line": 21,
          },
          "start": {
            "column": 18,
            "line": 1,
          },
        },
        "name": "./ui/Chart.holo",
        "properties": {
          "Dashboard": true,
          "__spread_BaseLayout": {
            "loc": {
              "end": {
                "column": 16,
                "line": 4,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "target": "BaseLayout",
            "type": "spread",
          },
          "composition": true,
          "panels": [
            {
              "__ref": "ui_panel",
            },
            {
              "content": {
                "target": {
                  "__ref": "statusText",
                },
                "type": "nullCoalescingAssignment",
                "value": "Ready",
              },
              "title": "Status",
            },
            {
              "__ref": "ui_panel",
            },
            {
              "chart": {
                "__spread_0": {
                  "argument": {
                    "__ref": "defaultChart",
                  },
                  "type": "spread",
                },
                "data": {
                  "__ref": "metrics",
                },
              },
              "title": "Metrics",
            },
          ],
          "title": {
            "left": {
              "__ref": "userTitle",
            },
            "operator": "??",
            "right": "Dashboard",
            "type": "binary",
          },
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Main dashboard view",
          },
        },
        "type": "from",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 21,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 18,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Chart": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [
            {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
          ],
          "directives": [
            {
              "config": {},
              "name": "accessible",
              "type": "trait",
            },
            {
              "config": {
                "default": "Main dashboard view",
              },
              "name": "alt_text",
              "type": "trait",
            },
          ],
          "id": "./ui/Chart.holo",
          "loc": {
            "end": {
              "column": 2,
              "line": 21,
            },
            "start": {
              "column": 18,
              "line": 1,
            },
          },
          "name": "./ui/Chart.holo",
          "properties": {
            "Dashboard": true,
            "__spread_BaseLayout": {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
            "composition": true,
            "panels": [
              {
                "__ref": "ui_panel",
              },
              {
                "content": {
                  "target": {
                    "__ref": "statusText",
                  },
                  "type": "nullCoalescingAssignment",
                  "value": "Ready",
                },
                "title": "Status",
              },
              {
                "__ref": "ui_panel",
              },
              {
                "chart": {
                  "__spread_0": {
                    "argument": {
                      "__ref": "defaultChart",
                    },
                    "type": "spread",
                  },
                  "data": {
                    "__ref": "metrics",
                  },
                },
                "title": "Metrics",
              },
            ],
            "title": {
              "left": {
                "__ref": "userTitle",
              },
              "operator": "??",
              "right": "Dashboard",
              "type": "binary",
            },
          },
          "traits": Map {
            "accessible" => {},
            "alt_text" => {
              "default": "Main dashboard view",
            },
          },
          "type": "from",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 18,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Chart": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [
            {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
          ],
          "directives": [
            {
              "config": {},
              "name": "accessible",
              "type": "trait",
            },
            {
              "config": {
                "default": "Main dashboard view",
              },
              "name": "alt_text",
              "type": "trait",
            },
          ],
          "id": "./ui/Chart.holo",
          "loc": {
            "end": {
              "column": 2,
              "line": 21,
            },
            "start": {
              "column": 18,
              "line": 1,
            },
          },
          "name": "./ui/Chart.holo",
          "properties": {
            "Dashboard": true,
            "__spread_BaseLayout": {
              "loc": {
                "end": {
                  "column": 16,
                  "line": 4,
                },
                "start": {
                  "column": 3,
                  "line": 4,
                },
              },
              "target": "BaseLayout",
              "type": "spread",
            },
            "composition": true,
            "panels": [
              {
                "__ref": "ui_panel",
              },
              {
                "content": {
                  "target": {
                    "__ref": "statusText",
                  },
                  "type": "nullCoalescingAssignment",
                  "value": "Ready",
                },
                "title": "Status",
              },
              {
                "__ref": "ui_panel",
              },
              {
                "chart": {
                  "__spread_0": {
                    "argument": {
                      "__ref": "defaultChart",
                    },
                    "type": "spread",
                  },
                  "data": {
                    "__ref": "metrics",
                  },
                },
                "title": "Metrics",
              },
            ],
            "title": {
              "left": {
                "__ref": "userTitle",
              },
              "operator": "??",
              "right": "Dashboard",
              "type": "binary",
            },
          },
          "traits": Map {
            "accessible" => {},
            "alt_text" => {
              "default": "Main dashboard view",
            },
          },
          "type": "from",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 21,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Complex Real-World AST Examples > interactive scene AST 1`] = `
{
  "ast": {
    "body": [],
    "children": [],
    "directives": [
      {
        "config": {},
        "name": "grabbable",
        "type": "trait",
      },
      {
        "config": {},
        "name": "throwable",
        "type": "trait",
      },
      {
        "config": {},
        "name": "grabbable",
        "type": "trait",
      },
      {
        "config": {},
        "name": "throwable",
        "type": "trait",
      },
    ],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 33,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [],
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "grabbable",
          "type": "trait",
        },
        {
          "config": {},
          "name": "throwable",
          "type": "trait",
        },
        {
          "config": {},
          "name": "grabbable",
          "type": "trait",
        },
        {
          "config": {},
          "name": "throwable",
          "type": "trait",
        },
      ],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 33,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP300",
      "column": 22,
      "context": "  5 |       geometry: "sphere",
  6 |       color: "red",
> 7 |       position: { x: -1, y: 1, z: -2 },
                          ^
  8 |       @grabbable,
  9 |       @throwable",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 7,
      "message": "HSP300: Unexpected token in expression: MINUS "-". Expected value, identifier, or expression",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 38,
      "context": "  5 |       geometry: "sphere",
  6 |       color: "red",
> 7 |       position: { x: -1, y: 1, z: -2 },
                                          ^
  8 |       @grabbable,
  9 |       @throwable",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 7,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP003",
      "column": 17,
      "context": "   6 |       color: "red",
   7 |       position: { x: -1, y: 1, z: -2 },
>  8 |       @grabbable,
                      ^
   9 |       @throwable
  10 |     },",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 8,
      "message": "HSP003: Expected node after directives, got COMMA. Valid nodes: orb, template, logic, object, composition, scene, group",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 17,
      "context": "   6 |       color: "red",
   7 |       position: { x: -1, y: 1, z: -2 },
>  8 |       @grabbable,
                      ^
   9 |       @throwable
  10 |     },",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 8,
      "message": "HSP001: Unexpected token COMMA "," at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP003",
      "column": 5,
      "context": "   8 |       @grabbable,
   9 |       @throwable
> 10 |     },
          ^
  11 |     {
  12 |       id: "orb2",",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 10,
      "message": "HSP003: Expected node after directives, got RBRACE. Valid nodes: orb, template, logic, object, composition, scene, group",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 5,
      "context": "   8 |       @grabbable,
   9 |       @throwable
> 10 |     },
          ^
  11 |     {
  12 |       id: "orb2",",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 10,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 37,
      "context": "  13 |       geometry: "sphere",
  14 |       color: "blue",
> 15 |       position: { x: 1, y: 1, z: -2 },
                                          ^
  16 |       @grabbable,
  17 |       @throwable",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 15,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP003",
      "column": 17,
      "context": "  14 |       color: "blue",
  15 |       position: { x: 1, y: 1, z: -2 },
> 16 |       @grabbable,
                      ^
  17 |       @throwable
  18 |     }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 16,
      "message": "HSP003: Expected node after directives, got COMMA. Valid nodes: orb, template, logic, object, composition, scene, group",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 17,
      "context": "  14 |       color: "blue",
  15 |       position: { x: 1, y: 1, z: -2 },
> 16 |       @grabbable,
                      ^
  17 |       @throwable
  18 |     }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 16,
      "message": "HSP001: Unexpected token COMMA "," at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP003",
      "column": 5,
      "context": "  16 |       @grabbable,
  17 |       @throwable
> 18 |     }
          ^
  19 |   ]
  20 |   ",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 18,
      "message": "HSP003: Expected node after directives, got RBRACE. Valid nodes: orb, template, logic, object, composition, scene, group",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 5,
      "context": "  16 |       @grabbable,
  17 |       @throwable
> 18 |     }
          ^
  19 |   ]
  20 |   ",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 18,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 5,
      "context": "  23 |     state idle {
  24 |       on: "grab" -> "grabbed"
> 25 |     }
          ^
  26 |     state grabbed {
  27 |       on: "throw" -> "flying"",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 25,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 5,
      "context": "  26 |     state grabbed {
  27 |       on: "throw" -> "flying"
> 28 |     }
          ^
  29 |     state flying {
  30 |       on: "land" -> "idle"",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 28,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 5,
      "context": "  29 |     state flying {
  30 |       on: "land" -> "idle"
> 31 |     }
          ^
  32 |   }
  33 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 31,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 3,
      "context": "  30 |       on: "land" -> "idle"
  31 |     }
> 32 |   }
        ^
  33 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 32,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 1,
      "context": "  31 |     }
  32 |   }
> 33 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 33,
      "message": "HSP001: Unexpected token RBRACE "}" at top level. Expected: composition, object, template, logic, or @directive",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Control Flow AST Nodes > conditional logic AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "condition": true,
          "doOtherThing": true,
          "doSomething": true,
          "else": true,
          "if": true,
        },
        "traits": Map {},
        "type": "ConditionalTest",
      },
    ],
    "children": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 0,
            "line": 0,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "condition": true,
          "doOtherThing": true,
          "doSomething": true,
          "else": true,
          "if": true,
        },
        "traits": Map {},
        "type": "ConditionalTest",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 0,
        "line": 0,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 0,
              "line": 0,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "condition": true,
            "doOtherThing": true,
            "doSomething": true,
            "else": true,
            "if": true,
          },
          "traits": Map {},
          "type": "ConditionalTest",
        },
      ],
      "children": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 0,
              "line": 0,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "condition": true,
            "doOtherThing": true,
            "doSomething": true,
            "else": true,
            "if": true,
          },
          "traits": Map {},
          "type": "ConditionalTest",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 0,
          "line": 0,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 6,
      "context": "  1 | logic ConditionalTest {
> 2 |   if (condition) {
          ^
  3 |     doSomething()
  4 |   } else {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token LPAREN "(" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 16,
      "context": "  1 | logic ConditionalTest {
> 2 |   if (condition) {
                    ^
  3 |     doSomething()
  4 |   } else {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token RPAREN ")" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 18,
      "context": "  1 | logic ConditionalTest {
> 2 |   if (condition) {
                      ^
  3 |     doSomething()
  4 |   } else {",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP001: Unexpected token LBRACE "{" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 16,
      "context": "  1 | logic ConditionalTest {
  2 |   if (condition) {
> 3 |     doSomething()
                    ^
  4 |   } else {
  5 |     doOtherThing()",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP001: Unexpected token LPAREN "(" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 10,
      "context": "  2 |   if (condition) {
  3 |     doSomething()
> 4 |   } else {
              ^
  5 |     doOtherThing()
  6 |   }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token LBRACE "{" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 17,
      "context": "  3 |     doSomething()
  4 |   } else {
> 5 |     doOtherThing()
                     ^
  6 |   }
  7 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Unexpected token LPAREN "(" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP004",
      "column": 2,
      "context": "  5 |     doOtherThing()
  6 |   }
> 7 | }
      ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 7,
      "message": "HSP004: Expected }. Got EOF """,
      "severity": "error",
      "suggestion": "Check for matching opening brace { and ensure all blocks are properly closed",
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Control Flow AST Nodes > state machine AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "idle",
            "loc": {
              "end": {
                "column": 4,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "name": "idle",
            "properties": {
              "on": "start",
              "running": true,
            },
            "traits": Map {},
            "type": "state",
          },
          {
            "children": [],
            "directives": [],
            "id": "running",
            "loc": {
              "end": {
                "column": 4,
                "line": 10,
              },
              "start": {
                "column": 3,
                "line": 8,
              },
            },
            "name": "running",
            "properties": {
              "idle": true,
              "on": "stop",
            },
            "traits": Map {},
            "type": "state",
          },
        ],
        "directives": [],
        "id": "SimpleMachine",
        "loc": {
          "end": {
            "column": 2,
            "line": 11,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SimpleMachine",
        "properties": {
          "initial": "idle",
        },
        "traits": Map {},
        "type": "state-machine",
      },
    ],
    "children": [
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "idle",
            "loc": {
              "end": {
                "column": 4,
                "line": 6,
              },
              "start": {
                "column": 3,
                "line": 4,
              },
            },
            "name": "idle",
            "properties": {
              "on": "start",
              "running": true,
            },
            "traits": Map {},
            "type": "state",
          },
          {
            "children": [],
            "directives": [],
            "id": "running",
            "loc": {
              "end": {
                "column": 4,
                "line": 10,
              },
              "start": {
                "column": 3,
                "line": 8,
              },
            },
            "name": "running",
            "properties": {
              "idle": true,
              "on": "stop",
            },
            "traits": Map {},
            "type": "state",
          },
        ],
        "directives": [],
        "id": "SimpleMachine",
        "loc": {
          "end": {
            "column": 2,
            "line": 11,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SimpleMachine",
        "properties": {
          "initial": "idle",
        },
        "traits": Map {},
        "type": "state-machine",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 11,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [
        {
          "children": [],
          "directives": [],
          "id": "idle",
          "loc": {
            "end": {
              "column": 4,
              "line": 6,
            },
            "start": {
              "column": 3,
              "line": 4,
            },
          },
          "name": "idle",
          "properties": {
            "on": "start",
            "running": true,
          },
          "traits": Map {},
          "type": "state",
        },
        {
          "children": [],
          "directives": [],
          "id": "running",
          "loc": {
            "end": {
              "column": 4,
              "line": 10,
            },
            "start": {
              "column": 3,
              "line": 8,
            },
          },
          "name": "running",
          "properties": {
            "idle": true,
            "on": "stop",
          },
          "traits": Map {},
          "type": "state",
        },
      ],
      "directives": [],
      "id": "SimpleMachine",
      "loc": {
        "end": {
          "column": 2,
          "line": 11,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "SimpleMachine",
      "properties": {
        "initial": "idle",
      },
      "traits": Map {},
      "type": "state-machine",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 17,
      "context": "  3 |   
  4 |   state idle {
> 5 |     on: "start" -> "running"
                     ^
  6 |   }
  7 |   ",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 5,
      "message": "HSP001: Unexpected token ARROW "->" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 16,
      "context": "   7 |   
   8 |   state running {
>  9 |     on: "stop" -> "idle"
                     ^
  10 |   }
  11 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 9,
      "message": "HSP001: Unexpected token ARROW "->" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Control Flow AST Nodes > timeline AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "RotationAnimation",
        "loc": {
          "end": {
            "column": 2,
            "line": 8,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RotationAnimation",
        "properties": {
          "duration": 1000,
          "keyframes": [
            {
              "rotation": {
                "y": 0,
              },
              "time": 0,
            },
            {
              "rotation": {
                "y": 360,
              },
              "time": 1000,
            },
          ],
          "target": "cube",
        },
        "traits": Map {},
        "type": "timeline",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "RotationAnimation",
        "loc": {
          "end": {
            "column": 2,
            "line": 8,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RotationAnimation",
        "properties": {
          "duration": 1000,
          "keyframes": [
            {
              "rotation": {
                "y": 0,
              },
              "time": 0,
            },
            {
              "rotation": {
                "y": 360,
              },
              "time": 1000,
            },
          ],
          "target": "cube",
        },
        "traits": Map {},
        "type": "timeline",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 8,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "RotationAnimation",
      "loc": {
        "end": {
          "column": 2,
          "line": 8,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "RotationAnimation",
      "properties": {
        "duration": 1000,
        "keyframes": [
          {
            "rotation": {
              "y": 0,
            },
            "time": 0,
          },
          {
            "rotation": {
              "y": 360,
            },
            "time": 1000,
          },
        ],
        "target": "cube",
      },
      "traits": Map {},
      "type": "timeline",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > accessibility traits 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Submit button",
            },
            "name": "alt_text",
            "type": "trait",
          },
          {
            "config": {
              "default": "Press to submit form",
            },
            "name": "screen_reader",
            "type": "trait",
          },
        ],
        "id": "AccessibleButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "AccessibleButton",
        "properties": {
          "text": "Click me",
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Submit button",
          },
          "screen_reader" => {
            "default": "Press to submit form",
          },
        },
        "type": "ui_button",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "accessible",
            "type": "trait",
          },
          {
            "config": {
              "default": "Submit button",
            },
            "name": "alt_text",
            "type": "trait",
          },
          {
            "config": {
              "default": "Press to submit form",
            },
            "name": "screen_reader",
            "type": "trait",
          },
        ],
        "id": "AccessibleButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "AccessibleButton",
        "properties": {
          "text": "Click me",
        },
        "traits": Map {
          "accessible" => {},
          "alt_text" => {
            "default": "Submit button",
          },
          "screen_reader" => {
            "default": "Press to submit form",
          },
        },
        "type": "ui_button",
      },
    ],
    "directives": [
      {
        "config": {},
        "name": "accessible",
        "type": "trait",
      },
      {
        "config": {
          "default": "Submit button",
        },
        "name": "alt_text",
        "type": "trait",
      },
      {
        "config": {
          "default": "Press to submit form",
        },
        "name": "screen_reader",
        "type": "trait",
      },
    ],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "accessible",
          "type": "trait",
        },
        {
          "config": {
            "default": "Submit button",
          },
          "name": "alt_text",
          "type": "trait",
        },
        {
          "config": {
            "default": "Press to submit form",
          },
          "name": "screen_reader",
          "type": "trait",
        },
      ],
      "id": "AccessibleButton",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "AccessibleButton",
      "properties": {
        "text": "Click me",
      },
      "traits": Map {
        "accessible" => {},
        "alt_text" => {
          "default": "Submit button",
        },
        "screen_reader" => {
          "default": "Press to submit form",
        },
      },
      "type": "ui_button",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > multiple trait directives 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "hoverable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "properties": {},
              "traits": Map {},
              "type": "fragment",
            },
          ],
          "configs": [],
          "properties": {
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "hoverable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "directives": [],
        "id": "InteractiveOrb",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "InteractiveOrb",
        "properties": {
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "hoverable",
                  "type": "trait",
                },
                {
                  "config": {},
                  "name": "throwable",
                  "type": "trait",
                },
              ],
              "properties": {},
              "traits": Map {},
              "type": "fragment",
            },
          ],
          "configs": [],
          "properties": {
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "hoverable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "directives": [],
        "id": "InteractiveOrb",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "InteractiveOrb",
        "properties": {
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "hoverable",
                "type": "trait",
              },
              {
                "config": {},
                "name": "throwable",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "configs": [],
        "properties": {
          "geometry": "sphere",
        },
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "grabbable",
              "type": "trait",
            },
            {
              "config": {},
              "name": "hoverable",
              "type": "trait",
            },
            {
              "config": {},
              "name": "throwable",
              "type": "trait",
            },
          ],
          "properties": {},
          "traits": Map {},
          "type": "fragment",
        },
      ],
      "directives": [],
      "id": "InteractiveOrb",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "InteractiveOrb",
      "properties": {
        "geometry": "sphere",
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > single trait directive 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
              ],
              "properties": {},
              "traits": Map {},
              "type": "fragment",
            },
          ],
          "configs": [],
          "properties": {
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "directives": [],
        "id": "GrabbableOrb",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "GrabbableOrb",
        "properties": {
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {},
                  "name": "grabbable",
                  "type": "trait",
                },
              ],
              "properties": {},
              "traits": Map {},
              "type": "fragment",
            },
          ],
          "configs": [],
          "properties": {
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "directives": [],
        "id": "GrabbableOrb",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "GrabbableOrb",
        "properties": {
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {},
                "name": "grabbable",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "configs": [],
        "properties": {
          "geometry": "sphere",
        },
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "grabbable",
              "type": "trait",
            },
          ],
          "properties": {},
          "traits": Map {},
          "type": "fragment",
        },
      ],
      "directives": [],
      "id": "GrabbableOrb",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "GrabbableOrb",
      "properties": {
        "geometry": "sphere",
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Directive AST Nodes > trait with configuration 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {
                    "friction": 0.8,
                    "mass": 1.5,
                  },
                  "name": "physics",
                  "type": "trait",
                },
              ],
              "properties": {},
              "traits": Map {},
              "type": "fragment",
            },
          ],
          "configs": [],
          "properties": {
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {
                  "friction": 0.8,
                  "mass": 1.5,
                },
                "name": "physics",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "directives": [],
        "id": "ConfiguredOrb",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ConfiguredOrb",
        "properties": {
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [
            {
              "children": [],
              "directives": [
                {
                  "config": {
                    "friction": 0.8,
                    "mass": 1.5,
                  },
                  "name": "physics",
                  "type": "trait",
                },
              ],
              "properties": {},
              "traits": Map {},
              "type": "fragment",
            },
          ],
          "configs": [],
          "properties": {
            "geometry": "sphere",
          },
          "systems": [],
        },
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {
                  "friction": 0.8,
                  "mass": 1.5,
                },
                "name": "physics",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "directives": [],
        "id": "ConfiguredOrb",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ConfiguredOrb",
        "properties": {
          "geometry": "sphere",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [
          {
            "children": [],
            "directives": [
              {
                "config": {
                  "friction": 0.8,
                  "mass": 1.5,
                },
                "name": "physics",
                "type": "trait",
              },
            ],
            "properties": {},
            "traits": Map {},
            "type": "fragment",
          },
        ],
        "configs": [],
        "properties": {
          "geometry": "sphere",
        },
        "systems": [],
      },
      "children": [
        {
          "children": [],
          "directives": [
            {
              "config": {
                "friction": 0.8,
                "mass": 1.5,
              },
              "name": "physics",
              "type": "trait",
            },
          ],
          "properties": {},
          "traits": Map {},
          "type": "fragment",
        },
      ],
      "directives": [],
      "id": "ConfiguredOrb",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ConfiguredOrb",
      "properties": {
        "geometry": "sphere",
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Edge Cases and Errors > deeply nested structure AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "level1": {
              "level2": {
                "level3": {
                  "value": "nested",
                },
              },
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Deep",
        "loc": {
          "end": {
            "column": 2,
            "line": 9,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Deep",
        "properties": {
          "level1": {
            "level2": {
              "level3": {
                "value": "nested",
              },
            },
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "level1": {
              "level2": {
                "level3": {
                  "value": "nested",
                },
              },
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Deep",
        "loc": {
          "end": {
            "column": 2,
            "line": 9,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Deep",
        "properties": {
          "level1": {
            "level2": {
              "level3": {
                "value": "nested",
              },
            },
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 9,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "level1": {
            "level2": {
              "level3": {
                "value": "nested",
              },
            },
          },
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "Deep",
      "loc": {
        "end": {
          "column": 2,
          "line": 9,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Deep",
      "properties": {
        "level1": {
          "level2": {
            "level3": {
              "value": "nested",
            },
          },
        },
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Edge Cases and Errors > empty composition AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {},
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Empty",
        "loc": {
          "end": {
            "column": 21,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Empty",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {},
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Empty",
        "loc": {
          "end": {
            "column": 21,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Empty",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 21,
        "line": 1,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {},
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "Empty",
      "loc": {
        "end": {
          "column": 21,
          "line": 1,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Empty",
      "properties": {},
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Edge Cases and Errors > minimal single property AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": "red",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Minimal",
        "loc": {
          "end": {
            "column": 37,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Minimal",
        "properties": {
          "color": "red",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": "red",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Minimal",
        "loc": {
          "end": {
            "column": 37,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Minimal",
        "properties": {
          "color": "red",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 37,
        "line": 1,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "color": "red",
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "Minimal",
      "loc": {
        "end": {
          "column": 37,
          "line": 1,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Minimal",
      "properties": {
        "color": "red",
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > complex expression combinations 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "result": {
              "condition": {
                "left": {
                  "__ref": "a",
                },
                "operator": "??",
                "right": {
                  "__ref": "b",
                },
                "type": "binary",
              },
              "falseValue": {
                "target": {
                  "__ref": "d",
                },
                "type": "nullCoalescingAssignment",
                "value": {
                  "__ref": "e",
                },
              },
              "trueValue": {
                "__ref": "c",
              },
              "type": "ternary",
            },
            "spread": {
              "__spread_0": {
                "argument": {
                  "__ref": "base",
                },
                "type": "spread",
              },
              "override": {
                "left": {
                  "__ref": "x",
                },
                "operator": "??",
                "right": {
                  "__ref": "y",
                },
                "type": "binary",
              },
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "ComplexExpr",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ComplexExpr",
        "properties": {
          "result": {
            "condition": {
              "left": {
                "__ref": "a",
              },
              "operator": "??",
              "right": {
                "__ref": "b",
              },
              "type": "binary",
            },
            "falseValue": {
              "target": {
                "__ref": "d",
              },
              "type": "nullCoalescingAssignment",
              "value": {
                "__ref": "e",
              },
            },
            "trueValue": {
              "__ref": "c",
            },
            "type": "ternary",
          },
          "spread": {
            "__spread_0": {
              "argument": {
                "__ref": "base",
              },
              "type": "spread",
            },
            "override": {
              "left": {
                "__ref": "x",
              },
              "operator": "??",
              "right": {
                "__ref": "y",
              },
              "type": "binary",
            },
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "result": {
              "condition": {
                "left": {
                  "__ref": "a",
                },
                "operator": "??",
                "right": {
                  "__ref": "b",
                },
                "type": "binary",
              },
              "falseValue": {
                "target": {
                  "__ref": "d",
                },
                "type": "nullCoalescingAssignment",
                "value": {
                  "__ref": "e",
                },
              },
              "trueValue": {
                "__ref": "c",
              },
              "type": "ternary",
            },
            "spread": {
              "__spread_0": {
                "argument": {
                  "__ref": "base",
                },
                "type": "spread",
              },
              "override": {
                "left": {
                  "__ref": "x",
                },
                "operator": "??",
                "right": {
                  "__ref": "y",
                },
                "type": "binary",
              },
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "ComplexExpr",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ComplexExpr",
        "properties": {
          "result": {
            "condition": {
              "left": {
                "__ref": "a",
              },
              "operator": "??",
              "right": {
                "__ref": "b",
              },
              "type": "binary",
            },
            "falseValue": {
              "target": {
                "__ref": "d",
              },
              "type": "nullCoalescingAssignment",
              "value": {
                "__ref": "e",
              },
            },
            "trueValue": {
              "__ref": "c",
            },
            "type": "ternary",
          },
          "spread": {
            "__spread_0": {
              "argument": {
                "__ref": "base",
              },
              "type": "spread",
            },
            "override": {
              "left": {
                "__ref": "x",
              },
              "operator": "??",
              "right": {
                "__ref": "y",
              },
              "type": "binary",
            },
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "result": {
            "condition": {
              "left": {
                "__ref": "a",
              },
              "operator": "??",
              "right": {
                "__ref": "b",
              },
              "type": "binary",
            },
            "falseValue": {
              "target": {
                "__ref": "d",
              },
              "type": "nullCoalescingAssignment",
              "value": {
                "__ref": "e",
              },
            },
            "trueValue": {
              "__ref": "c",
            },
            "type": "ternary",
          },
          "spread": {
            "__spread_0": {
              "argument": {
                "__ref": "base",
              },
              "type": "spread",
            },
            "override": {
              "left": {
                "__ref": "x",
              },
              "operator": "??",
              "right": {
                "__ref": "y",
              },
              "type": "binary",
            },
          },
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "ComplexExpr",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ComplexExpr",
      "properties": {
        "result": {
          "condition": {
            "left": {
              "__ref": "a",
            },
            "operator": "??",
            "right": {
              "__ref": "b",
            },
            "type": "binary",
          },
          "falseValue": {
            "target": {
              "__ref": "d",
            },
            "type": "nullCoalescingAssignment",
            "value": {
              "__ref": "e",
            },
          },
          "trueValue": {
            "__ref": "c",
          },
          "type": "ternary",
        },
        "spread": {
          "__spread_0": {
            "argument": {
              "__ref": "base",
            },
            "type": "spread",
          },
          "override": {
            "left": {
              "__ref": "x",
            },
            "operator": "??",
            "right": {
              "__ref": "y",
            },
            "type": "binary",
          },
        },
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > null coalescing assignment 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "test",
            "loc": {
              "end": {
                "column": 4,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": "test",
            "properties": {
              "count": true,
              "default": true,
              "name": true,
            },
            "traits": Map {},
            "type": "function",
          },
        ],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {},
        "traits": Map {},
        "type": "AssignmentTest",
      },
    ],
    "children": [
      {
        "body": {
          "eventHandlers": [],
          "functions": [],
          "tickHandlers": [],
        },
        "children": [],
        "directives": [],
        "id": "logic",
        "loc": {
          "end": {
            "column": 7,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "logic",
        "properties": {},
        "traits": Map {},
        "type": "logic",
      },
      {
        "children": [
          {
            "children": [],
            "directives": [],
            "id": "test",
            "loc": {
              "end": {
                "column": 4,
                "line": 5,
              },
              "start": {
                "column": 3,
                "line": 2,
              },
            },
            "name": "test",
            "properties": {
              "count": true,
              "default": true,
              "name": true,
            },
            "traits": Map {},
            "type": "function",
          },
        ],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 7,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {},
        "traits": Map {},
        "type": "AssignmentTest",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": "test",
              "loc": {
                "end": {
                  "column": 4,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": "test",
              "properties": {
                "count": true,
                "default": true,
                "name": true,
              },
              "traits": Map {},
              "type": "function",
            },
          ],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 6,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {},
          "type": "AssignmentTest",
        },
      ],
      "children": [
        {
          "body": {
            "eventHandlers": [],
            "functions": [],
            "tickHandlers": [],
          },
          "children": [],
          "directives": [],
          "id": "logic",
          "loc": {
            "end": {
              "column": 7,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "logic",
          "properties": {},
          "traits": Map {},
          "type": "logic",
        },
        {
          "children": [
            {
              "children": [],
              "directives": [],
              "id": "test",
              "loc": {
                "end": {
                  "column": 4,
                  "line": 5,
                },
                "start": {
                  "column": 3,
                  "line": 2,
                },
              },
              "name": "test",
              "properties": {
                "count": true,
                "default": true,
                "name": true,
              },
              "traits": Map {},
              "type": "function",
            },
          ],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 6,
            },
            "start": {
              "column": 7,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {},
          "traits": Map {},
          "type": "AssignmentTest",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP101",
      "column": 16,
      "context": "  1 | logic AssignmentTest {
> 2 |   function test() {
                    ^
  3 |     count ??= 0
  4 |     name ??= "default"",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP101: Unexpected token in properties: LPAREN. Expected property name, @directive, or spread (...)",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 11,
      "context": "  1 | logic AssignmentTest {
  2 |   function test() {
> 3 |     count ??= 0
               ^
  4 |     name ??= "default"
  5 |   }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 3,
      "message": "HSP001: Unexpected token NULL_COALESCE_ASSIGN "??=" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
    {
      "code": "HSP001",
      "column": 10,
      "context": "  2 |   function test() {
  3 |     count ??= 0
> 4 |     name ??= "default"
              ^
  5 |   }
  6 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 4,
      "message": "HSP001: Unexpected token NULL_COALESCE_ASSIGN "??=" in node body",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > null coalescing operator 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": {
              "left": {
                "__ref": "userColor",
              },
              "operator": "??",
              "right": "white",
              "type": "binary",
            },
            "size": {
              "left": {
                "__ref": "userSize",
              },
              "operator": "??",
              "right": 1,
              "type": "binary",
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "NullCoalesce",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NullCoalesce",
        "properties": {
          "color": {
            "left": {
              "__ref": "userColor",
            },
            "operator": "??",
            "right": "white",
            "type": "binary",
          },
          "size": {
            "left": {
              "__ref": "userSize",
            },
            "operator": "??",
            "right": 1,
            "type": "binary",
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": {
              "left": {
                "__ref": "userColor",
              },
              "operator": "??",
              "right": "white",
              "type": "binary",
            },
            "size": {
              "left": {
                "__ref": "userSize",
              },
              "operator": "??",
              "right": 1,
              "type": "binary",
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "NullCoalesce",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "NullCoalesce",
        "properties": {
          "color": {
            "left": {
              "__ref": "userColor",
            },
            "operator": "??",
            "right": "white",
            "type": "binary",
          },
          "size": {
            "left": {
              "__ref": "userSize",
            },
            "operator": "??",
            "right": 1,
            "type": "binary",
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "color": {
            "left": {
              "__ref": "userColor",
            },
            "operator": "??",
            "right": "white",
            "type": "binary",
          },
          "size": {
            "left": {
              "__ref": "userSize",
            },
            "operator": "??",
            "right": 1,
            "type": "binary",
          },
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "NullCoalesce",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "NullCoalesce",
      "properties": {
        "color": {
          "left": {
            "__ref": "userColor",
          },
          "operator": "??",
          "right": "white",
          "type": "binary",
        },
        "size": {
          "left": {
            "__ref": "userSize",
          },
          "operator": "??",
          "right": 1,
          "type": "binary",
        },
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > spread expression in array 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "items": [
              {
                "argument": {
                  "__ref": "defaults",
                },
                "type": "spread",
              },
              "extra",
            ],
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "ArraySpread",
        "loc": {
          "end": {
            "column": 2,
            "line": 3,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArraySpread",
        "properties": {
          "items": [
            {
              "argument": {
                "__ref": "defaults",
              },
              "type": "spread",
            },
            "extra",
          ],
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "items": [
              {
                "argument": {
                  "__ref": "defaults",
                },
                "type": "spread",
              },
              "extra",
            ],
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "ArraySpread",
        "loc": {
          "end": {
            "column": 2,
            "line": 3,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "ArraySpread",
        "properties": {
          "items": [
            {
              "argument": {
                "__ref": "defaults",
              },
              "type": "spread",
            },
            "extra",
          ],
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 3,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "items": [
            {
              "argument": {
                "__ref": "defaults",
              },
              "type": "spread",
            },
            "extra",
          ],
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "ArraySpread",
      "loc": {
        "end": {
          "column": 2,
          "line": 3,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "ArraySpread",
      "properties": {
        "items": [
          {
            "argument": {
              "__ref": "defaults",
            },
            "type": "spread",
          },
          "extra",
        ],
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > spread expression in object 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "BaseOrb": true,
            "color": "red",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "SpreadTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SpreadTest",
        "properties": {
          "BaseOrb": true,
          "color": "red",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "BaseOrb": true,
            "color": "red",
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "SpreadTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SpreadTest",
        "properties": {
          "BaseOrb": true,
          "color": "red",
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "BaseOrb": true,
          "color": "red",
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "SpreadTest",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "SpreadTest",
      "properties": {
        "BaseOrb": true,
        "color": "red",
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP101",
      "column": 3,
      "context": "  1 | composition SpreadTest {
> 2 |   ...BaseOrb
       ^
  3 |   color: "red"
  4 | }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP101: Unexpected token SPREAD "..." in composition body. Expected property name, @directive, or child node",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Expression AST Nodes > ternary operator 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": {
              "condition": {
                "__ref": "isActive",
              },
              "falseValue": "gray",
              "trueValue": "green",
              "type": "ternary",
            },
            "opacity": {
              "condition": {
                "__ref": "isVisible",
              },
              "falseValue": 0,
              "trueValue": 1,
              "type": "ternary",
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "TernaryTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "TernaryTest",
        "properties": {
          "color": {
            "condition": {
              "__ref": "isActive",
            },
            "falseValue": "gray",
            "trueValue": "green",
            "type": "ternary",
          },
          "opacity": {
            "condition": {
              "__ref": "isVisible",
            },
            "falseValue": 0,
            "trueValue": 1,
            "type": "ternary",
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "color": {
              "condition": {
                "__ref": "isActive",
              },
              "falseValue": "gray",
              "trueValue": "green",
              "type": "ternary",
            },
            "opacity": {
              "condition": {
                "__ref": "isVisible",
              },
              "falseValue": 0,
              "trueValue": 1,
              "type": "ternary",
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "TernaryTest",
        "loc": {
          "end": {
            "column": 2,
            "line": 4,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "TernaryTest",
        "properties": {
          "color": {
            "condition": {
              "__ref": "isActive",
            },
            "falseValue": "gray",
            "trueValue": "green",
            "type": "ternary",
          },
          "opacity": {
            "condition": {
              "__ref": "isVisible",
            },
            "falseValue": 0,
            "trueValue": 1,
            "type": "ternary",
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 4,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "color": {
            "condition": {
              "__ref": "isActive",
            },
            "falseValue": "gray",
            "trueValue": "green",
            "type": "ternary",
          },
          "opacity": {
            "condition": {
              "__ref": "isVisible",
            },
            "falseValue": 0,
            "trueValue": 1,
            "type": "ternary",
          },
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "TernaryTest",
      "loc": {
        "end": {
          "column": 2,
          "line": 4,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "TernaryTest",
      "properties": {
        "color": {
          "condition": {
            "__ref": "isActive",
          },
          "falseValue": "gray",
          "trueValue": "green",
          "type": "ternary",
        },
        "opacity": {
          "condition": {
            "__ref": "isVisible",
          },
          "falseValue": 0,
          "trueValue": 1,
          "type": "ternary",
        },
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Import and Module System > import statement AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 42,
            "line": 1,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 42,
            "line": 1,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 42,
        "line": 1,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 42,
              "line": 1,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 42,
              "line": 1,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 42,
          "line": 1,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Import and Module System > multiple imports AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 18,
            "line": 2,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {
          "Panel": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Panel.holo",
        "loc": {
          "end": {
            "column": 23,
            "line": 3,
          },
          "start": {
            "column": 18,
            "line": 2,
          },
        },
        "name": "./ui/Panel.holo",
        "properties": {
          "Controller": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./logic/Controller.hsplus",
        "loc": {
          "end": {
            "column": 55,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 3,
          },
        },
        "name": "./logic/Controller.hsplus",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 19,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "Button": true,
        },
        "traits": Map {},
        "type": "import",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Button.holo",
        "loc": {
          "end": {
            "column": 18,
            "line": 2,
          },
          "start": {
            "column": 19,
            "line": 1,
          },
        },
        "name": "./ui/Button.holo",
        "properties": {
          "Panel": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./ui/Panel.holo",
        "loc": {
          "end": {
            "column": 23,
            "line": 3,
          },
          "start": {
            "column": 18,
            "line": 2,
          },
        },
        "name": "./ui/Panel.holo",
        "properties": {
          "Controller": true,
          "import": true,
        },
        "traits": Map {},
        "type": "from",
      },
      {
        "children": [],
        "directives": [],
        "id": "./logic/Controller.hsplus",
        "loc": {
          "end": {
            "column": 55,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 3,
          },
        },
        "name": "./logic/Controller.hsplus",
        "properties": {},
        "traits": Map {},
        "type": "from",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 55,
        "line": 3,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 18,
              "line": 2,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {
            "Panel": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Panel.holo",
          "loc": {
            "end": {
              "column": 23,
              "line": 3,
            },
            "start": {
              "column": 18,
              "line": 2,
            },
          },
          "name": "./ui/Panel.holo",
          "properties": {
            "Controller": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./logic/Controller.hsplus",
          "loc": {
            "end": {
              "column": 55,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 3,
            },
          },
          "name": "./logic/Controller.hsplus",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 19,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "Button": true,
          },
          "traits": Map {},
          "type": "import",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Button.holo",
          "loc": {
            "end": {
              "column": 18,
              "line": 2,
            },
            "start": {
              "column": 19,
              "line": 1,
            },
          },
          "name": "./ui/Button.holo",
          "properties": {
            "Panel": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./ui/Panel.holo",
          "loc": {
            "end": {
              "column": 23,
              "line": 3,
            },
            "start": {
              "column": 18,
              "line": 2,
            },
          },
          "name": "./ui/Panel.holo",
          "properties": {
            "Controller": true,
            "import": true,
          },
          "traits": Map {},
          "type": "from",
        },
        {
          "children": [],
          "directives": [],
          "id": "./logic/Controller.hsplus",
          "loc": {
            "end": {
              "column": 55,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 3,
            },
          },
          "name": "./logic/Controller.hsplus",
          "properties": {},
          "traits": Map {},
          "type": "from",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 55,
          "line": 3,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Import and Module System > using statement AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "BaseTemplate",
        "loc": {
          "end": {
            "column": 48,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BaseTemplate",
        "properties": {
          "from": true,
        },
        "traits": Map {},
        "type": "using",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "BaseTemplate",
        "loc": {
          "end": {
            "column": 48,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "BaseTemplate",
        "properties": {
          "from": true,
        },
        "traits": Map {},
        "type": "using",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 48,
        "line": 1,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "BaseTemplate",
      "loc": {
        "end": {
          "column": 48,
          "line": 1,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "BaseTemplate",
      "properties": {
        "from": true,
      },
      "traits": Map {},
      "type": "using",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP101",
      "column": 25,
      "context": "> 1 | using BaseTemplate from "./templates/Base.holo"
                             ^",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 1,
      "message": "HSP101: Unexpected token in properties: STRING. Expected property name, @directive, or spread (...)",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Snapshot Stability Tests > AST snapshot should be deterministic 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "props": {
              "a": 1,
              "b": 2,
              "c": 3,
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Stable",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Stable",
        "properties": {
          "props": {
            "a": 1,
            "b": 2,
            "c": 3,
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "props": {
              "a": 1,
              "b": 2,
              "c": 3,
            },
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "Stable",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Stable",
        "properties": {
          "props": {
            "a": 1,
            "b": 2,
            "c": 3,
          },
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 7,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "props": {
            "a": 1,
            "b": 2,
            "c": 3,
          },
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "Stable",
      "loc": {
        "end": {
          "column": 2,
          "line": 7,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Stable",
      "properties": {
        "props": {
          "a": 1,
          "b": 2,
          "c": 3,
        },
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Template and Composition Inheritance > spread with template AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "ButtonTemplate": true,
            "color": "blue",
            "glow": true,
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "CustomButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "CustomButton",
        "properties": {
          "ButtonTemplate": true,
          "color": "blue",
          "glow": true,
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {
            "ButtonTemplate": true,
            "color": "blue",
            "glow": true,
          },
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "CustomButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "CustomButton",
        "properties": {
          "ButtonTemplate": true,
          "color": "blue",
          "glow": true,
        },
        "traits": Map {},
        "type": "composition",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": {
        "children": [],
        "configs": [],
        "properties": {
          "ButtonTemplate": true,
          "color": "blue",
          "glow": true,
        },
        "systems": [],
      },
      "children": [],
      "directives": [],
      "id": "CustomButton",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "CustomButton",
      "properties": {
        "ButtonTemplate": true,
        "color": "blue",
        "glow": true,
      },
      "traits": Map {},
      "type": "composition",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP101",
      "column": 3,
      "context": "  1 | composition CustomButton {
> 2 |   ...ButtonTemplate
       ^
  3 |   color: "blue"
  4 |   glow: true",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 2,
      "message": "HSP101: Unexpected token SPREAD "..." in composition body. Expected property name, @directive, or child node",
      "severity": "error",
      "suggestion": undefined,
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Template and Composition Inheritance > template definition AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "loc": {
          "end": {
            "column": 10,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "migrations": [],
        "name": "ButtonTemplate",
        "properties": {},
        "traits": Map {},
        "type": "template",
        "version": undefined,
      },
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 10,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "geometry": "cube",
          "scale": {
            "x": 0.2,
            "y": 0.05,
            "z": 0.1,
          },
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ButtonTemplate",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "loc": {
          "end": {
            "column": 10,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "migrations": [],
        "name": "ButtonTemplate",
        "properties": {},
        "traits": Map {},
        "type": "template",
        "version": undefined,
      },
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 10,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "geometry": "cube",
          "scale": {
            "x": 0.2,
            "y": 0.05,
            "z": 0.1,
          },
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ButtonTemplate",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "loc": {
            "end": {
              "column": 10,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "migrations": [],
          "name": "ButtonTemplate",
          "properties": {},
          "traits": Map {},
          "type": "template",
          "version": undefined,
        },
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "clickable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 10,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "geometry": "cube",
            "scale": {
              "x": 0.2,
              "y": 0.05,
              "z": 0.1,
            },
          },
          "traits": Map {
            "clickable" => {},
          },
          "type": "ButtonTemplate",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "loc": {
            "end": {
              "column": 10,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "migrations": [],
          "name": "ButtonTemplate",
          "properties": {},
          "traits": Map {},
          "type": "template",
          "version": undefined,
        },
        {
          "children": [],
          "directives": [
            {
              "config": {},
              "name": "clickable",
              "type": "trait",
            },
          ],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 10,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "geometry": "cube",
            "scale": {
              "x": 0.2,
              "y": 0.05,
              "z": 0.1,
            },
          },
          "traits": Map {
            "clickable" => {},
          },
          "type": "ButtonTemplate",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [
    {
      "code": "HSP001",
      "column": 10,
      "context": "> 1 | template ButtonTemplate {
              ^
  2 |   geometry: "cube"
  3 |   scale: { x: 0.2, y: 0.05, z: 0.1 }",
      "endColumn": undefined,
      "endLine": undefined,
      "line": 1,
      "message": "HSP001: Expected template name. Got IDENTIFIER "ButtonTemplate"",
      "severity": "error",
      "suggestion": "Did you mean 'template'?",
    },
  ],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": false,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Template and Composition Inheritance > template extension AST 1`] = `
{
  "ast": {
    "body": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {},
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "RedButton",
        "loc": {
          "end": {
            "column": 23,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RedButton",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
      {
        "children": [],
        "directives": [],
        "id": "ButtonTemplate",
        "loc": {
          "end": {
            "column": 2,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 1,
          },
        },
        "name": "ButtonTemplate",
        "properties": {
          "color": "red",
        },
        "traits": Map {},
        "type": "extends",
      },
    ],
    "children": [
      {
        "body": {
          "children": [],
          "configs": [],
          "properties": {},
          "systems": [],
        },
        "children": [],
        "directives": [],
        "id": "RedButton",
        "loc": {
          "end": {
            "column": 23,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "RedButton",
        "properties": {},
        "traits": Map {},
        "type": "composition",
      },
      {
        "children": [],
        "directives": [],
        "id": "ButtonTemplate",
        "loc": {
          "end": {
            "column": 2,
            "line": 3,
          },
          "start": {
            "column": 23,
            "line": 1,
          },
        },
        "name": "ButtonTemplate",
        "properties": {
          "color": "red",
        },
        "traits": Map {},
        "type": "extends",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 3,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "body": {
            "children": [],
            "configs": [],
            "properties": {},
            "systems": [],
          },
          "children": [],
          "directives": [],
          "id": "RedButton",
          "loc": {
            "end": {
              "column": 23,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "RedButton",
          "properties": {},
          "traits": Map {},
          "type": "composition",
        },
        {
          "children": [],
          "directives": [],
          "id": "ButtonTemplate",
          "loc": {
            "end": {
              "column": 2,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 1,
            },
          },
          "name": "ButtonTemplate",
          "properties": {
            "color": "red",
          },
          "traits": Map {},
          "type": "extends",
        },
      ],
      "children": [
        {
          "body": {
            "children": [],
            "configs": [],
            "properties": {},
            "systems": [],
          },
          "children": [],
          "directives": [],
          "id": "RedButton",
          "loc": {
            "end": {
              "column": 23,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "name": "RedButton",
          "properties": {},
          "traits": Map {},
          "type": "composition",
        },
        {
          "children": [],
          "directives": [],
          "id": "ButtonTemplate",
          "loc": {
            "end": {
              "column": 2,
              "line": 3,
            },
            "start": {
              "column": 23,
              "line": 1,
            },
          },
          "name": "ButtonTemplate",
          "properties": {
            "color": "red",
          },
          "traits": Map {},
          "type": "extends",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 3,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > UI Components AST > ui component hierarchy AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "id": "Dashboard",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Dashboard",
        "properties": {
          "children": [
            {
              "__ref": "ui_button",
            },
            {
              "text": "Start",
            },
            {
              "__ref": "ui_button",
            },
            {
              "text": "Stop",
            },
            {
              "__ref": "ui_text",
            },
            {
              "content": "Status: Ready",
            },
          ],
        },
        "traits": Map {},
        "type": "ui_panel",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "id": "Dashboard",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Dashboard",
        "properties": {
          "children": [
            {
              "__ref": "ui_button",
            },
            {
              "text": "Start",
            },
            {
              "__ref": "ui_button",
            },
            {
              "text": "Stop",
            },
            {
              "__ref": "ui_text",
            },
            {
              "content": "Status: Ready",
            },
          ],
        },
        "traits": Map {},
        "type": "ui_panel",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 7,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [],
      "id": "Dashboard",
      "loc": {
        "end": {
          "column": 2,
          "line": 7,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Dashboard",
      "properties": {
        "children": [
          {
            "__ref": "ui_button",
          },
          {
            "text": "Start",
          },
          {
            "__ref": "ui_button",
          },
          {
            "text": "Stop",
          },
          {
            "__ref": "ui_text",
          },
          {
            "content": "Status: Ready",
          },
        ],
      },
      "traits": Map {},
      "type": "ui_panel",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > UI Components AST > ui_button AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": "SubmitButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SubmitButton",
        "properties": {
          "height": 40,
          "text": "Submit",
          "width": 100,
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ui_button",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "clickable",
            "type": "trait",
          },
        ],
        "id": "SubmitButton",
        "loc": {
          "end": {
            "column": 2,
            "line": 6,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "SubmitButton",
        "properties": {
          "height": 40,
          "text": "Submit",
          "width": 100,
        },
        "traits": Map {
          "clickable" => {},
        },
        "type": "ui_button",
      },
    ],
    "directives": [
      {
        "config": {},
        "name": "clickable",
        "type": "trait",
      },
    ],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 6,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "clickable",
          "type": "trait",
        },
      ],
      "id": "SubmitButton",
      "loc": {
        "end": {
          "column": 2,
          "line": 6,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "SubmitButton",
      "properties": {
        "height": 40,
        "text": "Submit",
        "width": 100,
      },
      "traits": Map {
        "clickable" => {},
      },
      "type": "ui_button",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > UI Components AST > ui_panel AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "ui_floating",
            "type": "trait",
          },
        ],
        "id": "Menu",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Menu",
        "properties": {
          "height": 300,
          "width": 400,
        },
        "traits": Map {
          "ui_floating" => {},
        },
        "type": "ui_panel",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "ui_floating",
            "type": "trait",
          },
        ],
        "id": "Menu",
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Menu",
        "properties": {
          "height": 300,
          "width": 400,
        },
        "traits": Map {
          "ui_floating" => {},
        },
        "type": "ui_panel",
      },
    ],
    "directives": [
      {
        "config": {},
        "name": "ui_floating",
        "type": "trait",
      },
    ],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "ui_floating",
          "type": "trait",
        },
      ],
      "id": "Menu",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Menu",
      "properties": {
        "height": 300,
        "width": 400,
      },
      "traits": Map {
        "ui_floating" => {},
      },
      "type": "ui_panel",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Zone and Environment AST > environment settings AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [],
        "loc": {
          "end": {
            "column": 13,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "properties": {},
        "traits": Map {},
        "type": "environment",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 13,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "ambientColor": "#404040",
          "lighting": "soft",
          "skybox": "gradient",
        },
        "traits": Map {},
        "type": "MainScene",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [],
        "loc": {
          "end": {
            "column": 13,
            "line": 1,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "properties": {},
        "traits": Map {},
        "type": "environment",
      },
      {
        "children": [],
        "directives": [],
        "id": undefined,
        "loc": {
          "end": {
            "column": 2,
            "line": 5,
          },
          "start": {
            "column": 13,
            "line": 1,
          },
        },
        "name": undefined,
        "properties": {
          "ambientColor": "#404040",
          "lighting": "soft",
          "skybox": "gradient",
        },
        "traits": Map {},
        "type": "MainScene",
      },
    ],
    "directives": [],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": false,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 5,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "body": [
        {
          "children": [],
          "directives": [],
          "loc": {
            "end": {
              "column": 13,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "properties": {},
          "traits": Map {},
          "type": "environment",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 13,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "ambientColor": "#404040",
            "lighting": "soft",
            "skybox": "gradient",
          },
          "traits": Map {},
          "type": "MainScene",
        },
      ],
      "children": [
        {
          "children": [],
          "directives": [],
          "loc": {
            "end": {
              "column": 13,
              "line": 1,
            },
            "start": {
              "column": 1,
              "line": 1,
            },
          },
          "properties": {},
          "traits": Map {},
          "type": "environment",
        },
        {
          "children": [],
          "directives": [],
          "id": undefined,
          "loc": {
            "end": {
              "column": 2,
              "line": 5,
            },
            "start": {
              "column": 13,
              "line": 1,
            },
          },
          "name": undefined,
          "properties": {
            "ambientColor": "#404040",
            "lighting": "soft",
            "skybox": "gradient",
          },
          "traits": Map {},
          "type": "MainScene",
        },
      ],
      "directives": [],
      "id": "root",
      "loc": {
        "end": {
          "column": 2,
          "line": 5,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "properties": {},
      "traits": Map {},
      "type": "fragment",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": false,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;

exports[`Parser AST Visual Regression > Zone and Environment AST > zone definition AST 1`] = `
{
  "ast": {
    "body": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "plane_detection",
            "type": "trait",
          },
        ],
        "id": "Gallery",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Gallery",
        "properties": {
          "bounds": {
            "center": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "size": {
              "x": 10,
              "y": 3,
              "z": 10,
            },
          },
        },
        "traits": Map {
          "plane_detection" => {},
        },
        "type": "zone",
      },
    ],
    "children": [
      {
        "children": [],
        "directives": [
          {
            "config": {},
            "name": "plane_detection",
            "type": "trait",
          },
        ],
        "id": "Gallery",
        "loc": {
          "end": {
            "column": 2,
            "line": 7,
          },
          "start": {
            "column": 1,
            "line": 1,
          },
        },
        "name": "Gallery",
        "properties": {
          "bounds": {
            "center": {
              "x": 0,
              "y": 0,
              "z": 0,
            },
            "size": {
              "x": 10,
              "y": 3,
              "z": 10,
            },
          },
        },
        "traits": Map {
          "plane_detection" => {},
        },
        "type": "zone",
      },
    ],
    "directives": [
      {
        "config": {},
        "name": "plane_detection",
        "type": "trait",
      },
    ],
    "hasControlFlow": false,
    "hasState": false,
    "hasVRTraits": true,
    "id": "root",
    "imports": [],
    "loc": {
      "end": {
        "column": 2,
        "line": 7,
      },
      "start": {
        "column": 1,
        "line": 1,
      },
    },
    "migrations": undefined,
    "properties": {},
    "root": {
      "children": [],
      "directives": [
        {
          "config": {},
          "name": "plane_detection",
          "type": "trait",
        },
      ],
      "id": "Gallery",
      "loc": {
        "end": {
          "column": 2,
          "line": 7,
        },
        "start": {
          "column": 1,
          "line": 1,
        },
      },
      "name": "Gallery",
      "properties": {
        "bounds": {
          "center": {
            "x": 0,
            "y": 0,
            "z": 0,
          },
          "size": {
            "x": 10,
            "y": 3,
            "z": 10,
          },
        },
      },
      "traits": Map {
        "plane_detection" => {},
      },
      "type": "zone",
    },
    "traits": Map {},
    "type": "Program",
    "version": "1.0",
  },
  "compiledExpressions": Map {},
  "errors": [],
  "features": {
    "conditionals": false,
    "lifecycleHooks": false,
    "loops": false,
    "state": false,
    "vrTraits": true,
  },
  "requiredCompanions": [],
  "success": true,
  "warnings": [],
}
`;
